<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="apple-touch-icon" sizes="57x57" href="/favicon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/favicon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/favicon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/favicon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/favicon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/favicon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/favicon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/favicon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon-180x180.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/favicon-192x192.png">
	<link rel="shortcut icon" type="image/x-icon" href="/assets/icons/favicon.ico">
	<link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/assets/icons/favicon-144x144.png">
	<meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
	<meta name="author" content="nes" />
	<title>Vi IMproved</title>
	<meta property="og:title" content="Vi IMproved" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://nes.is-a.dev/out/2021/vim.html" />
	<meta property="og:image" content="https://ia.media-imdb.com/images/rock.jpg" />
	<link rel="preload" href="/assets/fonts/FairfaxHDEmoji.woff2" as="font" type="font/woff2" crossorigin>
	<style>@font-face{font-family:Body Font;font-style:normal;font-weight:400;src:url(/assets/fonts/FairfaxHDEmoji.woff2) format("woff2")}@font-face{font-family:Heading Font;src:url(/assets/fonts/cozette.woff2) format("woff2")}:root{--article-size:1em;--human-style:"CASL" 0.8}article{font-size:var(--article-size)}body{font-size:1.4em}body{font-family:Body Font,Heading Font,Symbols Nerd Font,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-variation-settings:"MONO" 0;font-weight:400}i{font-style:italic}code,pre{font-family:Heading Font,Body Font,Courier New,Courier,monospace;font-size:calc(var(--article-size)*.9);font-variation-settings:"MONO" 1}summary{font-size:calc(var(--article-size)*1.2)}h1,h2,h4{font-family:Heading Font,Body Font,Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-variation-settings:var(--human-style)}h4{font-weight:400;margin:0}h1,h2{font-variation-settings:var(--human-style),"wght" 600;font-weight:400}h1{font-size:calc(var(--article-size)*2.1);margin-bottom:.4em}h2{font-size:calc(var(--article-size)*2);margin-bottom:.3em}h4{font-size:calc(var(--article-size)*1)}header .img-sml{image-rendering:pixelated}.img-sml{max-height:200px;max-width:200px}@media only screen and (max-width:600px){h1{font-size:2em}}*{box-sizing:border-box;position:relative;scroll-behavior:smooth}:root{--margin:-0.8em;--black:#181818;--white:#fafafa;--white-lighter:#fdfdfd;--black-darker:#111;--white-darker:#f0f0f0;--black-lighter:#333;--nv-black:#181818;--nv-white:#fafafa;--nv-black-darker:#111;--gray:color-mix(in srgb,var(--black) 60%,var(--white) 40%)}pre{background-color:var(--nv-black-darker);color:var(--white)}.hljs{background-color:inherit!important;background:inherit!important}@media (prefers-color-scheme:dark){:root{--black:#fafafa;--white:#181818;--white-lighter:#111;--black-darker:#fdfdfd;--white-darker:#333;--black-lighter:#f0f0f0}}body::-webkit-scrollbar{width:.5em}body::-webkit-scrollbar-track{background-color:var(--white)}body::-webkit-scrollbar-thumb{background-color:var(--black)}body,html{height:100%}body{background-color:var(--white-lighter);color:var(--black);display:flex;flex-direction:column;margin:0;overflow-x:hidden;scrollbar-color:var(--white-darker) var(--white-lighter);scrollbar-width:.5em;tab-size:4}img{display:block}code,pre{line-height:normal;scrollbar-color:var(--white-darker) var(--white-lighter)}pre{border-radius:5px;margin:0;overflow-x:auto;overflow-y:hidden;padding:1em;text-align:left;white-space:normal}pre:has(code:not(.language-plaintext)){border:1px solid}pre>code{white-space:pre}article{line-height:1.5;padding-left:12vw;padding-right:23vw;width:100%}body>article:first-child{padding-top:2em}article ul,li>ul,p{margin-top:0}li>ul:not(:empty){margin-bottom:1em}a{color:var(--gray);text-decoration:none;word-wrap:break-word;hyphens:auto;word-break:break-word}a.special{color:inherit}summary::marker{content:""}summary:before{content:"‚ñ∂";font-size:.8em;left:-1.2em;position:absolute;top:.15em;transition:all .3s ease}details[open] summary:before{transform:rotate(90deg)}footer{align-items:center;display:flex;margin-left:5vw;padding:2em 0 0}article footer{margin-left:0}article img{max-height:60vh;object-fit:contain;object-position:left;width:100%}header img{border-radius:5px;float:right}nav.toc{float:right;font-size:.8em;margin:2em;max-width:20vw;position:fixed;right:0;text-overflow:ellipsis;top:0;z-index:999}nav.toc ul{list-style:none;margin:0;padding:0;white-space:nowrap}nav.toc a{color:var(--black)}@media only screen and (max-width:600px){article{padding-left:8vw;padding-right:0}nav.toc{display:none}header img{float:revert}}</style>
</head>

<body>
	<nav class="toc">
		<ul><li><a href='#plugins'>Plugins</a></li><li><a href='#configuration'>Configuration</a></li></ul>
	</nav>
	<article>


		<!-- HIGHLIGHTJS LOADING -->
		<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css"></noscript>
		<script defer src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js" onload="hljs.highlightAll();"></script>
		<header>
  <img class='img-sml' src="assets/images/dump/fd1bdbbb-2de7-4d24-ab5a-e883d5f2f103.avif" />
  <!-- post_image="assets/images/dump/fd1bdbbb-2de7-4d24-ab5a-e883d5f2f103.avif" -->
  <h1>Vi IMproved</h1>
  <!-- post_description="Cool vim stuff" -->
</header>
<br/>
<i>This is just a bunch of neat stuff I find related to Vim, maybe plugins, scripts or just neat settings.</i><br/>
Speaking of which, I found this neat article on the history of vim:<br/>
<a href="https://twobithistory.org/2018/08/05/where-vim-came-from.html">https://twobithistory.org/2018/08/05/where-vim-came-from.html</a><br/>
Might be a fun read.<br/>
<br/>
<h2 id="plugins">Plugins</h2>
<p>
<br/>
<ul>
<li><a href="https://github.com/dense-analysis/ale">üçª Asynchronous Linting Engine</a><br/>
  A great plugin that takes care of Linting, Formatting & Autocompletion<br/>
  Quite customizable but some bits are a bit dated by default.<br/>
</li>
</ul><br/><ul>
<li><a href="https://github.com/ap/vim-css-color">CSS Color</a><br/>
  Highlight hex codes & web names for colors with the actual color :), works really well<br/>
  Lacks support for some languages (lua) but that can be easily fixed via autocommand.<br/>
</li>
</ul><br/><ul>
<li><a href="https://github.com/sheerun/vim-polyglot">Polygot</a><br/>
  Language pack for vim,<br/>
  A good one to have since you do not notice it much unless you're very worried about startup times<br/>
</li>
</ul><br/><ul>
<li><a href="https://github.com/mattn/emmet-vim">Emmet</a><br/>
  Essential if you edit HTML, You probably already know about this one.<br/>
</li>
</ul><br/><ul>
<li><a href="https://github.com/eraserhd/parinfer-rust">Parinfer</a><br/>
  Infer your parenthesis!<br/>
  True bliss if you ever edit lisp code üò≥<br/>
  Also use this, it helps a lot: <a href="https://github.com/junegunn/rainbow_parentheses.vim">junegunn/rainbow_parentheses.vim</a><br/>
</li>
</ul><br/><ul>
<li><a href="https://github.com/lambdalisue/fern.vim">üåµ Fern</a><br/>
  Great alternative to NERDTree / netrw and imo a much better one<br/>
  Feels pretty clean and nice to use,<br/>
  If you're using neovim, <a href="kyazdani42/nvim-tree.lua">nvim-tree</a> will work much better for you & it has some nicer features.<br/>
</li>
</ul><br/><!-- Replace with something better -->
<br/>
<ul>
<li><a href="https://github.com/itchyny/lightline.vim">Lightline</a><br/>
  I don't use a status line but if I did I would use lightline, it works really well and is easy to customize IM:<a href="https://i.imgflip.com/5pb8qw.jpg">M</a><br/>
</li>
</ul><br/><ul>
<li><a href="https://github.com/nvim-telescope/telescope.nvim">üî≠ Telescope</a><br/>
  I wish I had learnt about this before, its a really nice plugin, it generates a menu for you that allows to<br/>
  search through files, content of files, anything and it can be mightly handy instead of fiddling with the wildmenu all day.<br/>
  Vim users have <a href="junegunn/fzf.vim">fzf.vim</a> which does some similar stuff.<br/>
</li>
</ul><br/><ul>
<li><a href="https://github.com/folke/zen-mode.nvim">Zen Mode</a><br/>
  This is an interesting one, What it does is slim down vim's UI so it becomes very bare bones, this is really useful<br/>
  for when you are editing documents instead of code and need vim to done down the hacker man aesthetic.<br/>
  This plugin is <a href="https://github.com/junegunn/goyo.vim">goyo</a> for vim users.<br/>
</li>
</ul><br/></p>
<h2 id="configuration">Configuration</h2>
<p>
<br/>
Making the most out of vanilla vim features<br/>
<br/>

<details>
	<summary>
		NetRW
	</summary>
	<p>
		Using NetRW as a file tree.<br/>
From <a href="https://shapeshed.com/vim-netrw/">this post</a><br/>
tldr:<br/>
<br/>
<pre>
<code class="language-vim">let g:netrw_banner &equals; 0 " Hide the banner
let g:netrw_browse_split &equals; 3 " Open in new tab
let g:netrw_winsize &equals; 25 " Size
let g:netrw_liststyle &equals; 3 " Show files in tree form	</code>
</pre>
<br/>
See what each option does with <code>:help netrw-browser-settings</code><br/>
	</p>
</details>
<br/>

<details>
	<summary>
		:Grep
	</summary>
	<p>
		Improving the :grep command to work similar to how <a href="https://github.com/mileszs/ack.vim">ack.vim</a> works<br/>
See the <a href="https://gist.github.com/romainl/56f0c28ef953ffc157f36cc495947ab3">full gist</a>, it explains everything<br/>
final snippet:<br/>
<br/>
<pre>
<code class="language-vim">function! Grep(...)
	return system(join(&lsqb;&grepprg&rsqb; + &lsqb;expandcmd(join(a:000, ' '))&rsqb;, ' '))
endfunction
command! -nargs&equals;+ -complete&equals;file_in_path -bar Grep  cgetexpr Grep(&lt;f-args&gt;)
command! -nargs&equals;+ -complete&equals;file_in_path -bar LGrep lgetexpr Grep(&lt;f-args&gt;)
augroup quickfix
	autocmd!
	autocmd QuickFixCmdPost cgetexpr cwindow
	autocmd QuickFixCmdPost lgetexpr lwindow
augroup END	</code>
</pre>
<br/>
	</p>
</details>
<br/>

<details>
	<summary>
		Tab Indicator
	</summary>
	<p>
		If and only if you indent with tabs, vim can bestow upon you a slick tab line:<br/>
<code>set list lcs=tab:\‚îÇ\ " There is a space here :)</code><br/>
	</p>
</details>
<br/>

<details>
	<summary>
		Export to HTML
	</summary>
	<p>
		This is a pretty neat capability I did not know vim had,<br/>
By the power of an included plugin, You can run <code>:TOhtml</code> to convert the entire current file to a HTML with all of vim's<br/>
syntax highlighted goodness,<br/>
And you can script it! Like so:<br/>
<br/>
<pre>
<code class="language-sh">lang&equals;"$2"
f&equals;$(mktemp)
echo "$0" | head -n -1 | nvim -n --headless \
	+"let g:html_no_progress &equals; 0"\
	+"let g:html_ignore_folding &equals; 0"\
	+'let g:html_prevent_copy &equals; "fn"'\
	+"set ft&equals;$1"\
	+"runtime! syntax/2html.vim"\
	+"wq! $f"\
	+"q!" - 1&gt; /dev/null	</code>
</pre>
<br/>
You can see more options for it here: <a href="https://vimhelp.org/syntax.txt.html#%3ATOhtml">https://vimhelp.org/syntax.txt.html#%3ATOhtml</a> ,<br/>
<a href="/assets/make.html">Here</a> is a example file from the make script of this website.<br/>
<br/>
<ul>
<li>‚úè <strike>This is now used to generate code syntax highlighting for this site.</strike> - Turns out it was way too slow<br/>
</li>
	</p>
</details>
<br/>

<details>
	<summary>
		Improving :help and :Man
	</summary>
	<p>
		I find vim's help pages annoying to navigate since by default, its difficult to navigate between sections, this fixes it:<br/>
<code>au FileType help,man nnoremap &lt;buffer&gt; &lt;CR&gt; &lt;C-]&gt;</code><br/>
This makes it so hitting enter in a help buffer will try to just to the currently selected word<br/>
(the world the cursor is on.)<br/>
Here are some more nice shortcuts: <a href="https://vim.fandom.com/wiki/Learn_to_use_help#Simplify_help_navigation">https://vim.fandom.com/wiki/Learn_to_use_help#Simplify_help_navigation</a><br/>
<br/>
</p>
<h4 id="using-vim-as-a-man-pager">Using vim as a man pager</h4>
<p>
There are lots of ways to do it (documented <a href="https://vim.fandom.com/wiki/Using_vim_as_a_man-page_viewer_under_Unix">here</a> but<br/>
the simplest way I found is to simple alias <code>man</code>, like so in your shell configuration file:<br/>
<br/>
<pre>
<code class="language-sh">man () {
	nvim +"Man $2 $1" +"only"
}	</code>
</pre>
<br/>
If you use vim, remember to add this to your vimrc:<br/>
<code>runtime ftplugin/man.vim</code><br/>
as <code>:help ft-man-plugin</code> instructs you to.<br/>
<br/>
<ul>
<li>This has some issues like files like <code>./local.man</code> but I do not often use this so its not a problem for me.<br/>
</li>
	</p>
</details>
<br/>

<details>
	<summary>
		Linting
	</summary>
	<p>
		Here are a few useful gists on the topic:<br/>
<a href="https://gist.github.com/romainl/2f748f0c0079769e9532924b117f9252">https://gist.github.com/romainl/2f748f0c0079769e9532924b117f9252</a><br><br/>
<a href="https://gist.github.com/romainl/ce55ce6fdc1659c5fbc0f4224fd6ad29">https://gist.github.com/romainl/ce55ce6fdc1659c5fbc0f4224fd6ad29</a><br/>
<br/>
What I did to get <code>shellcheck</code> to work:<br/>
<br/>
<ul>
<li>Setup an autocommand to set the <code>compiler</code> to <code>shellcheck -f gcc</code> for any shell files<br/>
</li>
<li>Used <a href="https://github.com/mh21/errormarker.vim">https://github.com/mh21/errormarker.vim</a> to get ALE like markings<br/>
</li>
<li>From error marker's readme: <code>let &errorformat="%f:%l:%c: %t%&ast;[^:]:%m,%f:%l: %t%&ast;[^:]:%m," . &errorformat</code><br/>
</li>
<li>Made vim run <code>:make</code> on file write.<br/>
</li>
</ul><br/>‚úè Actually I have reconsidered this, its way too painful for anything complicated over multiple lines, its a lot<br/>
simpler to just use ALE for those, fine for stuff like GCC or Shell check tho<br/>
	</p>
</details>
<br/>

<details>
	<summary>
		Spell Checking & Dictionary Completion
	</summary>
	<p>
		As much as I hate to link a luke smith video, this one actually explains stuff so here you go: <a href="https://www.youtube.com/watch?v=ez1XBUqbS68">https://www.youtube.com/watch?v=ez1XBUqbS68</a><br/>
But basically:<br/>
<br/>
<ul>
<li>Enable spell checking with <code>:set spell</code><br/>
</li>
<li>Add words to the white list with <code>zg</code><br/>
</li>
<li>Add words to the black list with <code>zug</code><br/>
</li>
<li>Go through the suggest corrections with <code>z=</code> while your cursor is over misspelled word.<br/>
</li>
</ul><br/>For dictionary completion, you can use the following snippet:<br/>
You might need to rewrite it in vim script for vim...<br/>
<br/>
<pre>
<code class="language-lua">local spell_complete &equals; vim.api.nvim_replace_termcodes('&lt;C-x&gt;&lt;C-k&gt;', true, true, true)
local M &equals; {}
function M.spell()
	if vim.opt.spell
	and (vim.fn.pumvisible() &equals;&equals; 0)
	and ((vim.v.char &gt;&equals; 'a' and vim.v.char &lt;&equals; 'z')
	or (vim.v.char &gt;&equals; 'A' and vim.v.char &lt;&equals; 'Z')) then
		vim.fn.feedkeys(spell_complete, 'n')
	end
end
function M.setup_spell()
	vim.opt.spell &equals; true
	vim.cmd &lsqb;&lsqb;
	autocmd InsertCharPre &#42; lua require('auto').spell() " You'll need to change this
	&rsqb;&rsqb;
end

-- And this too:
vim.cmd &lsqb;&lsqb; au FileType markdown,html lua require('auto').setup_spell() &rsqb;&rsqb;

return M	</code>
</pre>
<br/>
It works, fairly <strike>well.</strike> badly, it has lots of issues when you have multiple buffers open...<br/>
	</p>
</details>
<br/>
<hr />
<br/>
<center><i>~ More to come.. Maybe üöß ~</i></center>
		<footer style="margin-bottom: 2em;">
			<a class="special" href="/index.html">Return To Index</a>
		</footer>
	</article>
</body>
