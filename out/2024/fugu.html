<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="apple-touch-icon" sizes="57x57" href="/favicon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/favicon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/favicon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/favicon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/favicon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/favicon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/favicon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/favicon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon-180x180.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/favicon-192x192.png">
	<link rel="shortcut icon" type="image/x-icon" href="/assets/icons/favicon.ico">
	<link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/assets/icons/favicon-144x144.png">
	<meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
	<meta name="author" content="nes" />
	<title>2024, What can the web do?</title>
	<meta property="og:title" content="2024, What can the web do?" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="https://nes.is-a.dev/out/2024/fugu.html" />
	<meta property="og:image" content="https://ia.media-imdb.com/images/rock.jpg" />
	<link rel="preload" href="/assets/fonts/FairfaxHDEmoji.woff2" as="font" type="font/woff2" crossorigin>
	<style>@font-face{font-family:Body Font;font-style:normal;font-weight:400;src:url(/assets/fonts/FairfaxHDEmoji.woff2) format("woff2")}@font-face{font-family:Heading Font;src:url(/assets/fonts/cozette.woff2) format("woff2")}:root{--article-size:1em;--human-style:"CASL" 0.8}article{font-size:var(--article-size)}body{font-size:1.4em}body{font-family:Body Font,Heading Font,Symbols Nerd Font,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-variation-settings:"MONO" 0;font-weight:400}figcaption,i{font-style:italic}code{font-family:Heading Font,Body Font,Courier New,Courier,monospace;font-size:calc(var(--article-size)*.9);font-variation-settings:"MONO" 1}h1,h2,h3{font-family:Heading Font,Body Font,Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-variation-settings:var(--human-style)}h1,h2,h3{font-variation-settings:var(--human-style),"wght" 600;font-weight:400}h1{font-size:calc(var(--article-size)*2.1);margin-bottom:.4em}h2{font-size:calc(var(--article-size)*2);margin-bottom:.3em}h3{font-size:calc(var(--article-size)*1.5)}button{background:coral;border:0;box-shadow:none;color:var(--white);cursor:pointer;display:inline-block;font-family:inherit;font-size:.8em;height:fit-content;outline:0;outline:1px solid var(--white);outline-offset:-6px;padding:.8em .9em;text-wrap:nowrap;width:fit-content}button:hover{font-weight:700}.onx{overflow-x:none}header .img-sml{image-rendering:pixelated}.img-sml{max-height:200px;max-width:200px}@media only screen and (max-width:600px){h1{font-size:2em}}*{box-sizing:border-box;position:relative;scroll-behavior:smooth}:root{--margin:-0.8em;--black:#181818;--white:#fafafa;--white-lighter:#fdfdfd;--black-darker:#111;--white-darker:#f0f0f0;--black-lighter:#333;--nv-black:#181818;--nv-white:#fafafa;--nv-black-darker:#111;--gray:color-mix(in srgb,var(--black) 60%,var(--white) 40%)}.hljs{background-color:inherit!important;background:inherit!important}@media (prefers-color-scheme:dark){:root{--black:#fafafa;--white:#181818;--white-lighter:#111;--black-darker:#fdfdfd;--white-darker:#333;--black-lighter:#f0f0f0}}body::-webkit-scrollbar{width:.5em}body::-webkit-scrollbar-track{background-color:var(--white)}body::-webkit-scrollbar-thumb{background-color:var(--black)}body,html{height:100%}body{background-color:var(--white-lighter);color:var(--black);display:flex;flex-direction:column;margin:0;overflow-x:hidden;scrollbar-color:var(--white-darker) var(--white-lighter);scrollbar-width:.5em;tab-size:4}h3{margin-bottom:.1em}img{display:block}code{line-height:normal;scrollbar-color:var(--white-darker) var(--white-lighter)}figure{display:inline-block}article{line-height:1.5;padding-left:12vw;padding-right:23vw;width:100%}body>article:first-child{padding-top:2em}article ul,li>ul,p{margin-top:0}li>ul:not(:empty){margin-bottom:1em}iframe{border:1px dashed;height:100%;width:100%}iframe.nb{border:0}a{color:var(--gray);text-decoration:none;word-wrap:break-word;hyphens:auto;word-break:break-word}a.special{color:inherit}figcaption{color:color-mix(in srgb,var(--black) 70%,var(--white) 30%);font-size:.8em;font-style:italic;text-align:right}figcaption{margin-left:1em}figure{margin:0}footer{align-items:center;display:flex;margin-left:5vw;padding:2em 0 0}article footer{margin-left:0}article img{max-height:60vh;object-fit:contain;object-position:left;width:100%}header img{border-radius:5px;float:right}nav.toc{float:right;font-size:.8em;margin:2em;max-width:20vw;position:fixed;right:0;text-overflow:ellipsis;top:0;z-index:999}nav.toc ul{list-style:none;margin:0;padding:0;white-space:nowrap}nav.toc ul .toc-subheading:before{border-left:2px solid gray;content:"";padding-left:.8em}nav.toc ul .toc-subheading:last-child:before{background-image:linear-gradient(180deg,gray 0,gray 50%,transparent 0,transparent 75%,transparent);background-repeat:no-repeat;background-size:2px 100%;border-left:none}nav.toc ul .toc-subheading{position:relative}nav.toc ul .toc-subheading:after{border-bottom:2px solid gray;content:"";height:.5em;left:0;position:absolute;width:.6em}nav.toc a{color:var(--black)}nav.toc ul .toc-subheading{margin-left:.6em}@media only screen and (max-width:600px){article{padding-left:8vw;padding-right:0}nav.toc{display:none}header img{float:revert}}</style>
</head>

<body>
	<nav class="toc">
		<ul><li><a href='#file-system-access'>üìÇ File System Access</a></li><li><a href='#compression-streams'>Compression Streams</a></li><li><a href='#real-time-communication'>üóÉÔ∏è Real Time Communication</a></li><li><a href='#talk-to-serial-devices'>üîå Talk to Serial Devices</a></li><li><a href='#pwa-share-url-scheme-custom-titlebar'>PWA: Share, URL Scheme, Custom titlebar</a></li><li class='toc-subheading'><a href='#share-target'>Share Target</a></li><li class='toc-subheading'><a href='#custom-titlebar'>Custom titlebar</a></li></ul>
	</nav>
	<article>


		<!-- HIGHLIGHTJS LOADING -->
		<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css"></noscript>
		<script defer src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js" onload="hljs.highlightAll();"></script>
		<header>
  <img class='img-sml' src="assets/images/icon-fugu.avif" />
  <!-- post_image="assets/images/icon-fugu.avif" -->
  <h1>2024, What can the web do?</h1>
  <!-- post_description="An overview of modern web capabilities" -->
</header>
<br/>
Lately, I've been really interested in PWAs and how the web platform keeps becoming a platform for a very wide array of apps, removing much of the reason people use things like Electron or Tauri and decoupling web apps from the user's system & exposing powerful capabilities from within the sandbox.<br/>
<br/>
<h2 id="file-system-access">üìÇ File System Access</h2>
<p>
This is one of the most exciting ones for me, With this API, a user can grant access to a specified directory in their local file system, This API also encompasses a save file API to replace the standard hidden download button trick and an API for easily opening a system file picker to allow the web app access to a specific file.<br/>
<br/>
This can be very useful in an app like Photopea and it might even be enough for many electron applications to be only web apps, for example Obsidian comes to mind, you could grant it access to a VAULT folder and (to my belief) it could function almost entirely as a website<br/>
<br/>
To use it, you need to run <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showOpenFilePicker"><code>window.showOpenFilePicker</code></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showDirectoryPicker"><code>window.showOpenDirectoryPicker</code></a> on button activation, If it's to save a single file you can instead use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showSaveFilePicker"><code>window.showSaveFilePicker</code></a>, From there you get a File or Directory Handle which can be used to read / write to the file / directory.<br/>
<br/>
Unfortunatley, This hasn't been implemented by Mozilla (<a href="https://mozilla.github.io/standards-positions/#native-file-system">Mozilla's Position</a>) & WebKit (<a href="https://github.com/WebKit/standards-positions/issues/28">WebKit's Position</a>) :/, Which is reasonable since most websites don't need access to a user's file system and careless users could easily cause irreparable harm, I think it's still quite useful :P<br/>
<br/>
Here's an example:<br/>
<iframe src='/experiments/fsa.html'></iframe><br/>
<ul>
<li><a href="https://fs.spec.whatwg.org/">WhatWG Standard</a><br/>
</li>
<li><a href="https://developer.chrome.com/docs/capabilities/web-apis/file-system-access">Chrome Documentation</a><br/>
</li>
</ul><br/></p>
<h2 id="compression-streams">Compression Streams</h2>
<p>
These recently added streams allow you to read and write compressed data to streams (think blobs / files), Right now only <code>gzip</code>, <code>deflate</code> or <code>deflate-raw</code> are supported options, But I'm keeping my fingers crossed for brotli or zstd to be added ü§û<br/>
<br/>
In the meantime, people have been compressing <a href="https://purplesyringa.moe/blog/webp-the-webpage-compression-format/">their web pages by storing it inside a WebP image</a>, I wonder what result's one would get with AVIF though I don't imagine them to be <i>too</i> different <br/>
<br/>
<iframe class='nb onx' src='https://bcd-table.neswk.workers.dev/?style=false&key=api.CompressionStream&reportSize=true'></iframe><br/>
<ul>
<li><a href="https://github.com/whatwg/compression/issues/54">Issue for zstd</a><br/>
</li>
<li><a href="https://github.com/whatwg/compression/issues/54">Issue for brotli</a><br/>
</li>
<li><a href="https://compression.spec.whatwg.org/#compressionstream">WhatWG Standard</a><br/>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Compression_Streams_API">MDN</a><br/>
</li>
</ul><br/></p>
<h2 id="real-time-communication">üóÉÔ∏è Real Time Communication </h2>
<p>
Ever wanted to easily connect 2 instances of your website and transfer arbitrary data between them or even Audio / Video streams? Well with WebRTC, you can, you only need a signalling server for some initial communication between the clients, which can be easily done with a library like <strike><a href="https://peerjs.com/">peer.js</a></strike> <a href="https://github.com/feross/simple-peer">feross/simple-peer</a>,<br/>
<br/>
Once the connection is established, data can be transferred in <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel">RTCDataChannels</a> or a media (video / auto) stream can be mostly handled by the browser itself and then rendered in a canvas.<br/>
<br/>
This is what powers stuff like <a href="https://webtorrent.io/">WebTorrent</a> & <a href="https://github.com/szimek/sharedrop">ShareDrop</a><br/>
<br/>
<iframe class='nb onx' src='https://bcd-table.neswk.workers.dev/?style=false&key=api.RTCPeerConnection&reportSize=true'></iframe><br/>
<ul>
<li><a href="https://fireship.io/lessons/webrtc-firebase-video-chat/">Firebase course for WebRTC</a><br/>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API">MDN</a><br/>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebTransport">WebTransport</a><br/>
</li>
</ul><br/></p>
<h2 id="talk-to-serial-devices">üîå Talk to Serial Devices</h2>
<p>
The Web Serial API allows you to easily write a web app to communicate with your microcontroller over USB serial, This only works on Edge & Chrome for now though<br/>
<br/>
<a href='/experiments/serial.html'>[SERIAL CONSOLE WEBAPP]</a><br/>
<iframe class='nb onx' src='https://bcd-table.neswk.workers.dev/?style=false&key=api.Serial&reportSize=true'></iframe><br/>
</p>
<h2 id="pwa-share-url-scheme-custom-titlebar">PWA: Share, URL Scheme, Custom titlebar</h2>
<p>
This is just a few of the <i>many</i> PWA APIs that I find especially cool or useful<br/>
<br/>
<a href="https://web.dev/learn/pwa/capabilities">A full list from web.dev</a><br/>
<a href="https://developer.chrome.com/docs/capabilities/fugu-showcase">Project Fugu Showcase</a><br/>
<br/>
</p>
<h3 id="share-target">Share Target</h3>
<p>
Essentially this lets you add an entry to your system's share menu, you'd be most familiar with this on mobile devices, where you want to share a file, a url or anything to a friend through this menu<br/>
<br/>
A few notes on usage, this API allows your app to recieve both files and textual data like links and what not, but if you're dealing with a file, it must be a <b>POST</b> request to an endpoint in your app, <i>Hint: Making this a service worker will make your life a lot easier I promise</i> otherwise if it's a GET request, any binary data is discarded and textual data are inserted as URL query parameters as per what's defined in your <code>manifest.json</code><br/>
<br/>
This one is quite useful on mobile devices, kinda mid on desktop, but the real pity is it seems to be pretty inconsistent, I've used this with a personal PWA I've made to make file sharing friction-less (Goodbye, slow af notion uploads) and when I tried installing it on my Android phone through the Brave browser (My usual browser), It doesn't work :/, After some research I discovered the cause to be that as brave is a user installed application, It can't register <i>new</i> share targets of it's own, Chrome being a system installed app has the appropriate permissions to do so and works without a hitch, Even then behaviour was a little off, on my development Windows 10 machine, The share target worked just fine but on my friend's Windows 11 machine, It installed fine but the app was missing from the share menu, I'm not entirely sure why and I haven't had time to research since right now the PWA fulfills exactly what I wanted to do.<br/>
<br/>
<iframe class='nb onx' src='https://bcd-table.neswk.workers.dev/?style=false&key=html.manifest.share_target&reportSize=true'></iframe><br/>
<ul>
<li><a href="https://developer.chrome.com/docs/capabilities/web-apis/web-share-target">Chrome Article</a><br/>
</li>
</ul><br/></p>
<h3 id="custom-titlebar">Custom titlebar</h3>
<p>
I remember seeing this in one the issues for <a href="https://github.com/gluon-framework/gluon/issues/13">gluon</a>, It's an API that allows the PWA to draw on the "titlebar" of it's application window with the browser just providing window controls (close/minimize/maximize).<br/>
<br/>
<figure><img src="assets/images/image.avif" alt="Custom titlebar example" title="Custom titlebar example" loading="lazy" /><figcaption>Custom titlebar example</figcaption></figure><br/>
<br/>
Again seems to only be implemented by Chromium though :/<br/>
<br/>
<iframe class='nb onx' style='max-height: 400px;' src='https://bcd-table.neswk.workers.dev/?style=false&key=api.WindowControlsOverlay&reportSize=true'></iframe><br/>
<a href="https://web.dev/articles/window-controls-overlay">Web.dev Article</a><br/>
<br/>
<script>
window.addEventListener("message", (event) => {
  console.log(event.data)
    if (event.data.type === "resize") {
      // Find the iframe that matches the message source
      const iframes = document.querySelectorAll("iframe");
      for (const frame of iframes) {
        if (frame.contentWindow === event.source) {
          frame.style.width  = event.data.width + "px";
          frame.style.height = event.data.height + "px";
        }
      }
    }
  });
</script>
		<footer style="margin-bottom: 2em;">
			<a class="special" href="/index.html">Return To Index</a>
		</footer>
	</article>
</body>
