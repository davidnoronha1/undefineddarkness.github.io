<span style="color:#0057ae">bool</span> <span style="color:#010181">ExportImageAsCode</span><span style="color:#000000">(</span>Image image<span style="color:#000000">,</span> <span style="color:#0057ae">const char</span> <span style="color:#000000">*</span>fileName<span style="color:#000000">){</span>
    <span style="color:#0057ae">bool</span> success <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">;</span>
<span style="color:#008200">#if defined(SUPPORT_IMAGE_EXPORT)</span>
<span style="color:#008200">#ifndef TEXT_BYTES_PER_LINE</span>
    <span style="color:#008200">#define TEXT_BYTES_PER_LINE     20</span>
<span style="color:#008200">#endif</span>
    <span style="color:#0057ae">int</span> dataSize <span style="color:#000000">=</span> <span style="color:#010181">GetPixelDataSize</span><span style="color:#000000">(</span>image<span style="color:#000000">.</span>width<span style="color:#000000">,</span> image<span style="color:#000000">.</span>height<span style="color:#000000">,</span> image<span style="color:#000000">.</span>format<span style="color:#000000">);</span>
    <span style="color:#838183; font-style:italic">// NOTE: Text data buffer size is estimated considering image data size in bytes</span>
    <span style="color:#838183; font-style:italic">// and requiring 6 char bytes for every byte: &quot;0x00, &quot;</span>
    <span style="color:#0057ae">char</span> <span style="color:#000000">*</span>txtData <span style="color:#000000">= (</span><span style="color:#0057ae">char</span> <span style="color:#000000">*)</span><span style="color:#010181">RL_CALLOC</span><span style="color:#000000">(</span>dataSize<span style="color:#000000">*</span><span style="color:#b07e00">6</span> <span style="color:#000000">+</span> <span style="color:#b07e00">2000</span><span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">char</span><span style="color:#000000">));</span>
    <span style="color:#0057ae">int</span> byteCount <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;////////////////////////////////////////////////////////////////////////////////////////</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;//                                                                                    //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;// ImageAsCode exporter v1.0 - Image pixel data exported as an array of bytes         //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;//                                                                                    //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;// more info and bugs-report:  github.com/raysan5/raylib                              //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;// feedback and support:       ray[at]raylib.com                                      //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;//                                                                                    //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;// Copyright (c) 2018-2023 Ramon Santamaria (&#64;raysan5)                                //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;//                                                                                    //</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;////////////////////////////////////////////////////////////////////////////////////////</span><span style="color:#ff00ff">\n\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    <span style="color:#838183; font-style:italic">// Get file name from path and convert variable name to uppercase</span>
    <span style="color:#0057ae">char</span> varFileName<span style="color:#000000">[</span><span style="color:#b07e00">256</span><span style="color:#000000">] = {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
    <span style="color:#010181">strcpy</span><span style="color:#000000">(</span>varFileName<span style="color:#000000">,</span> <span style="color:#010181">GetFileNameWithoutExt</span><span style="color:#000000">(</span>fileName<span style="color:#000000">));</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> varFileName<span style="color:#000000">[</span>i<span style="color:#000000">] !=</span> <span style="color:#bf0303">&apos;\0&apos;</span><span style="color:#000000">;</span> i<span style="color:#000000">++)</span> <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">((</span>varFileName<span style="color:#000000">[</span>i<span style="color:#000000">] &gt;=</span> <span style="color:#bf0303">&apos;a&apos;</span><span style="color:#000000">) &amp;&amp; (</span>varFileName<span style="color:#000000">[</span>i<span style="color:#000000">] &lt;=</span> <span style="color:#bf0303">&apos;z&apos;</span><span style="color:#000000">)) {</span> varFileName<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> varFileName<span style="color:#000000">[</span>i<span style="color:#000000">] -</span> <span style="color:#b07e00">32</span><span style="color:#000000">; }</span>
    <span style="color:#838183; font-style:italic">// Add image information</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;// Image data information</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;#define %s_WIDTH    %i</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">,</span> varFileName<span style="color:#000000">,</span> image<span style="color:#000000">.</span>width<span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;#define %s_HEIGHT   %i</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">,</span> varFileName<span style="color:#000000">,</span> image<span style="color:#000000">.</span>height<span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;#define %s_FORMAT   %i          // raylib internal pixel format</span><span style="color:#ff00ff">\n\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">,</span> varFileName<span style="color:#000000">,</span> image<span style="color:#000000">.</span>format<span style="color:#000000">);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;static unsigned char %s_DATA[%i] = { &quot;</span><span style="color:#000000">,</span> varFileName<span style="color:#000000">,</span> dataSize<span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> dataSize <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">;</span> i<span style="color:#000000">++)</span> byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">, ((</span>i<span style="color:#000000">%</span>TEXT_BYTES_PER_LINE <span style="color:#000000">==</span> <span style="color:#b07e00">0</span><span style="color:#000000">)?</span> <span style="color:#bf0303">&quot;0x%x,</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span> <span style="color:#000000">:</span> <span style="color:#bf0303">&quot;0x%x, &quot;</span><span style="color:#000000">), ((</span><span style="color:#0057ae">unsigned char</span> <span style="color:#000000">*)</span>image<span style="color:#000000">.</span>data<span style="color:#000000">)[</span>i<span style="color:#000000">]);</span>
    byteCount <span style="color:#000000">+=</span> <span style="color:#010181">sprintf</span><span style="color:#000000">(</span>txtData <span style="color:#000000">+</span> byteCount<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;0x%x };</span><span style="color:#ff00ff">\n</span><span style="color:#bf0303">&quot;</span><span style="color:#000000">, ((</span><span style="color:#0057ae">unsigned char</span> <span style="color:#000000">*)</span>image<span style="color:#000000">.</span>data<span style="color:#000000">)[</span>dataSize <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">]);</span>
    <span style="color:#838183; font-style:italic">// NOTE: Text data size exported is determined by &apos;\0&apos; (NULL) character</span>
    success <span style="color:#000000">=</span> <span style="color:#010181">SaveFileText</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> txtData<span style="color:#000000">);</span>
    <span style="color:#010181">RL_FREE</span><span style="color:#000000">(</span>txtData<span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>      <span style="color:#838183; font-style:italic">// SUPPORT_IMAGE_EXPORT</span>
<span style="color:#008200"></span>    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>success <span style="color:#000000">!=</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_INFO<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;FILEIO: [%s] Image as code exported successfully&quot;</span><span style="color:#000000">,</span> fileName<span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;FILEIO: [%s] Failed to export image as code&quot;</span><span style="color:#000000">,</span> fileName<span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">return</span> success<span style="color:#000000">;</span>
<span style="color:#000000">}</span>
