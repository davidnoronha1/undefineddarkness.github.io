Model <span style="color:#010181">LoadModel</span><span style="color:#000000">(</span><span style="color:#0057ae">const char</span> <span style="color:#000000">*</span>fileName<span style="color:#000000">){</span>
    Model model <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
<span style="color:#008200">#if defined(SUPPORT_FILEFORMAT_OBJ)</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.obj&quot;</span><span style="color:#000000">))</span> model <span style="color:#000000">=</span> <span style="color:#010181">LoadOBJ</span><span style="color:#000000">(</span>fileName<span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(SUPPORT_FILEFORMAT_IQM)</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.iqm&quot;</span><span style="color:#000000">))</span> model <span style="color:#000000">=</span> <span style="color:#010181">LoadIQM</span><span style="color:#000000">(</span>fileName<span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(SUPPORT_FILEFORMAT_GLTF)</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.gltf&quot;</span><span style="color:#000000">) ||</span> <span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.glb&quot;</span><span style="color:#000000">))</span> model <span style="color:#000000">=</span> <span style="color:#010181">LoadGLTF</span><span style="color:#000000">(</span>fileName<span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(SUPPORT_FILEFORMAT_VOX)</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.vox&quot;</span><span style="color:#000000">))</span> model <span style="color:#000000">=</span> <span style="color:#010181">LoadVOX</span><span style="color:#000000">(</span>fileName<span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(SUPPORT_FILEFORMAT_M3D)</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.m3d&quot;</span><span style="color:#000000">))</span> model <span style="color:#000000">=</span> <span style="color:#010181">LoadM3D</span><span style="color:#000000">(</span>fileName<span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>
    <span style="color:#838183; font-style:italic">// Make sure model transform is set to identity matrix!</span>
    model<span style="color:#000000">.</span>transform <span style="color:#000000">=</span> <span style="color:#010181">MatrixIdentity</span><span style="color:#000000">();</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>model<span style="color:#000000">.</span>meshCount <span style="color:#000000">==</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        model<span style="color:#000000">.</span>meshCount <span style="color:#000000">=</span> <span style="color:#b07e00">1</span><span style="color:#000000">;</span>
        model<span style="color:#000000">.</span>meshes <span style="color:#000000">= (</span>Mesh <span style="color:#000000">*)</span><span style="color:#010181">RL_CALLOC</span><span style="color:#000000">(</span>model<span style="color:#000000">.</span>meshCount<span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span>Mesh<span style="color:#000000">));</span>
<span style="color:#008200">#if defined(SUPPORT_MESH_GENERATION)</span>
        <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;MESH: [%s] Failed to load mesh data, default to cube mesh&quot;</span><span style="color:#000000">,</span> fileName<span style="color:#000000">);</span>
        model<span style="color:#000000">.</span>meshes<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">] =</span> <span style="color:#010181">GenMeshCube</span><span style="color:#000000">(</span><span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">);</span>
<span style="color:#008200">#else</span>
        <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;MESH: [%s] Failed to load mesh data&quot;</span><span style="color:#000000">,</span> fileName<span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">else</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Upload vertex data to GPU (static mesh)</span>
        <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> model<span style="color:#000000">.</span>meshCount<span style="color:#000000">;</span> i<span style="color:#000000">++)</span> <span style="color:#010181">UploadMesh</span><span style="color:#000000">(&amp;</span>model<span style="color:#000000">.</span>meshes<span style="color:#000000">[</span>i<span style="color:#000000">],</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>model<span style="color:#000000">.</span>materialCount <span style="color:#000000">==</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;MATERIAL: [%s] Failed to load material data, default to white material&quot;</span><span style="color:#000000">,</span> fileName<span style="color:#000000">);</span>
        model<span style="color:#000000">.</span>materialCount <span style="color:#000000">=</span> <span style="color:#b07e00">1</span><span style="color:#000000">;</span>
        model<span style="color:#000000">.</span>materials <span style="color:#000000">= (</span>Material <span style="color:#000000">*)</span><span style="color:#010181">RL_CALLOC</span><span style="color:#000000">(</span>model<span style="color:#000000">.</span>materialCount<span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span>Material<span style="color:#000000">));</span>
        model<span style="color:#000000">.</span>materials<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">] =</span> <span style="color:#010181">LoadMaterialDefault</span><span style="color:#000000">();</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>model<span style="color:#000000">.</span>meshMaterial <span style="color:#000000">==</span> NULL<span style="color:#000000">)</span> model<span style="color:#000000">.</span>meshMaterial <span style="color:#000000">= (</span><span style="color:#0057ae">int</span> <span style="color:#000000">*)</span><span style="color:#010181">RL_CALLOC</span><span style="color:#000000">(</span>model<span style="color:#000000">.</span>meshCount<span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">int</span><span style="color:#000000">));</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">return</span> model<span style="color:#000000">;</span>
<span style="color:#000000">}</span>
