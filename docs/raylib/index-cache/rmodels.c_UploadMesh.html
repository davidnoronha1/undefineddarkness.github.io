<span style="color:#0057ae">void</span> <span style="color:#010181">UploadMesh</span><span style="color:#000000">(</span>Mesh <span style="color:#000000">*</span>mesh<span style="color:#000000">,</span> <span style="color:#0057ae">bool</span> dynamic<span style="color:#000000">){</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>vaoId <span style="color:#000000">&gt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Check if mesh has already been loaded in GPU</span>
        <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;VAO: [ID %i] Trying to re-load an already loaded mesh&quot;</span><span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vaoId<span style="color:#000000">);</span>
        <span style="color:#000000; font-weight:bold">return</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    mesh<span style="color:#000000">-&gt;</span>vboId <span style="color:#000000">= (</span><span style="color:#0057ae">unsigned int</span> <span style="color:#000000">*)</span><span style="color:#010181">RL_CALLOC</span><span style="color:#000000">(</span>MAX_MESH_VERTEX_BUFFERS<span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">unsigned int</span><span style="color:#000000">));</span>
    mesh<span style="color:#000000">-&gt;</span>vaoId <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>        <span style="color:#838183; font-style:italic">// Vertex Array Object</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>     <span style="color:#838183; font-style:italic">// Vertex buffer: positions</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">1</span><span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>     <span style="color:#838183; font-style:italic">// Vertex buffer: texcoords</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">2</span><span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>     <span style="color:#838183; font-style:italic">// Vertex buffer: normals</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">3</span><span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>     <span style="color:#838183; font-style:italic">// Vertex buffer: colors</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>     <span style="color:#838183; font-style:italic">// Vertex buffer: tangents</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">5</span><span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>     <span style="color:#838183; font-style:italic">// Vertex buffer: texcoords2</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">6</span><span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>     <span style="color:#838183; font-style:italic">// Vertex buffer: indices</span>
<span style="color:#008200">#if defined(GRAPHICS_API_OPENGL_33) || defined(GRAPHICS_API_OPENGL_ES2)</span>
    mesh<span style="color:#000000">-&gt;</span>vaoId <span style="color:#000000">=</span> <span style="color:#010181">rlLoadVertexArray</span><span style="color:#000000">();</span>
    <span style="color:#010181">rlEnableVertexArray</span><span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>vaoId<span style="color:#000000">);</span>
    <span style="color:#838183; font-style:italic">// NOTE: Vertex attributes must be uploaded considering default locations points and available vertex data</span>
    <span style="color:#838183; font-style:italic">// Enable vertex attributes: position (shader-location = 0)</span>
    <span style="color:#0057ae">void</span> <span style="color:#000000">*</span>vertices <span style="color:#000000">=</span> mesh<span style="color:#000000">-&gt;</span>animVertices <span style="color:#000000">!=</span> NULL <span style="color:#000000">?</span> mesh<span style="color:#000000">-&gt;</span>animVertices <span style="color:#000000">:</span> mesh<span style="color:#000000">-&gt;</span>vertices<span style="color:#000000">;</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">] =</span> <span style="color:#010181">rlLoadVertexBuffer</span><span style="color:#000000">(</span>vertices<span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">),</span> dynamic<span style="color:#000000">);</span>
    <span style="color:#010181">rlSetVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">3</span><span style="color:#000000">,</span> RL_FLOAT<span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">);</span>
    <span style="color:#010181">rlEnableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">0</span><span style="color:#000000">);</span>
    <span style="color:#838183; font-style:italic">// Enable vertex attributes: texcoords (shader-location = 1)</span>
    mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">1</span><span style="color:#000000">] =</span> <span style="color:#010181">rlLoadVertexBuffer</span><span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>texcoords<span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">2</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">),</span> dynamic<span style="color:#000000">);</span>
    <span style="color:#010181">rlSetVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">1</span><span style="color:#000000">,</span> <span style="color:#b07e00">2</span><span style="color:#000000">,</span> RL_FLOAT<span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">);</span>
    <span style="color:#010181">rlEnableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">1</span><span style="color:#000000">);</span>
    <span style="color:#838183; font-style:italic">// WARNING: When setting default vertex attribute values, the values for each generic vertex attribute</span>
    <span style="color:#838183; font-style:italic">// is part of current state, and it is maintained even if a different program object is used</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>normals <span style="color:#000000">!=</span> NULL<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Enable vertex attributes: normals (shader-location = 2)</span>
        <span style="color:#0057ae">void</span> <span style="color:#000000">*</span>normals <span style="color:#000000">=</span> mesh<span style="color:#000000">-&gt;</span>animNormals <span style="color:#000000">!=</span> NULL <span style="color:#000000">?</span> mesh<span style="color:#000000">-&gt;</span>animNormals <span style="color:#000000">:</span> mesh<span style="color:#000000">-&gt;</span>normals<span style="color:#000000">;</span>
        mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">2</span><span style="color:#000000">] =</span> <span style="color:#010181">rlLoadVertexBuffer</span><span style="color:#000000">(</span>normals<span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">),</span> dynamic<span style="color:#000000">);</span>
        <span style="color:#010181">rlSetVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">2</span><span style="color:#000000">,</span> <span style="color:#b07e00">3</span><span style="color:#000000">,</span> RL_FLOAT<span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlEnableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">2</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">else</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Default vertex attribute: normal</span>
        <span style="color:#838183; font-style:italic">// WARNING: Default value provided to shader if location available</span>
        <span style="color:#0057ae">float</span> value<span style="color:#000000">[</span><span style="color:#b07e00">3</span><span style="color:#000000">] = {</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f <span style="color:#000000">};</span>
        <span style="color:#010181">rlSetVertexAttributeDefault</span><span style="color:#000000">(</span><span style="color:#b07e00">2</span><span style="color:#000000">,</span> value<span style="color:#000000">,</span> SHADER_ATTRIB_VEC3<span style="color:#000000">,</span> <span style="color:#b07e00">3</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlDisableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">2</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>colors <span style="color:#000000">!=</span> NULL<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Enable vertex attribute: color (shader-location = 3)</span>
        mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">3</span><span style="color:#000000">] =</span> <span style="color:#010181">rlLoadVertexBuffer</span><span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>colors<span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">4</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">unsigned char</span><span style="color:#000000">),</span> dynamic<span style="color:#000000">);</span>
        <span style="color:#010181">rlSetVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">3</span><span style="color:#000000">,</span> <span style="color:#b07e00">4</span><span style="color:#000000">,</span> RL_UNSIGNED_BYTE<span style="color:#000000">,</span> <span style="color:#b07e00">1</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlEnableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">3</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">else</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Default vertex attribute: color</span>
        <span style="color:#838183; font-style:italic">// WARNING: Default value provided to shader if location available</span>
        <span style="color:#0057ae">float</span> value<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">] = {</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f <span style="color:#000000">};</span>    <span style="color:#838183; font-style:italic">// WHITE</span>
        <span style="color:#010181">rlSetVertexAttributeDefault</span><span style="color:#000000">(</span><span style="color:#b07e00">3</span><span style="color:#000000">,</span> value<span style="color:#000000">,</span> SHADER_ATTRIB_VEC4<span style="color:#000000">,</span> <span style="color:#b07e00">4</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlDisableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">3</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>tangents <span style="color:#000000">!=</span> NULL<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Enable vertex attribute: tangent (shader-location = 4)</span>
        mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">] =</span> <span style="color:#010181">rlLoadVertexBuffer</span><span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>tangents<span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">4</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">),</span> dynamic<span style="color:#000000">);</span>
        <span style="color:#010181">rlSetVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">4</span><span style="color:#000000">,</span> <span style="color:#b07e00">4</span><span style="color:#000000">,</span> RL_FLOAT<span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlEnableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">4</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">else</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Default vertex attribute: tangent</span>
        <span style="color:#838183; font-style:italic">// WARNING: Default value provided to shader if location available</span>
        <span style="color:#0057ae">float</span> value<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">] = {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
        <span style="color:#010181">rlSetVertexAttributeDefault</span><span style="color:#000000">(</span><span style="color:#b07e00">4</span><span style="color:#000000">,</span> value<span style="color:#000000">,</span> SHADER_ATTRIB_VEC4<span style="color:#000000">,</span> <span style="color:#b07e00">4</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlDisableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">4</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>texcoords2 <span style="color:#000000">!=</span> NULL<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Enable vertex attribute: texcoord2 (shader-location = 5)</span>
        mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">5</span><span style="color:#000000">] =</span> <span style="color:#010181">rlLoadVertexBuffer</span><span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>texcoords2<span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">2</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">),</span> dynamic<span style="color:#000000">);</span>
        <span style="color:#010181">rlSetVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">5</span><span style="color:#000000">,</span> <span style="color:#b07e00">2</span><span style="color:#000000">,</span> RL_FLOAT<span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlEnableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">5</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">else</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Default vertex attribute: texcoord2</span>
        <span style="color:#838183; font-style:italic">// WARNING: Default value provided to shader if location available</span>
        <span style="color:#0057ae">float</span> value<span style="color:#000000">[</span><span style="color:#b07e00">2</span><span style="color:#000000">] = {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
        <span style="color:#010181">rlSetVertexAttributeDefault</span><span style="color:#000000">(</span><span style="color:#b07e00">5</span><span style="color:#000000">,</span> value<span style="color:#000000">,</span> SHADER_ATTRIB_VEC2<span style="color:#000000">,</span> <span style="color:#b07e00">2</span><span style="color:#000000">);</span>
        <span style="color:#010181">rlDisableVertexAttribute</span><span style="color:#000000">(</span><span style="color:#b07e00">5</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>indices <span style="color:#000000">!=</span> NULL<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        mesh<span style="color:#000000">-&gt;</span>vboId<span style="color:#000000">[</span><span style="color:#b07e00">6</span><span style="color:#000000">] =</span> <span style="color:#010181">rlLoadVertexBufferElement</span><span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>indices<span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>triangleCount<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">unsigned short</span><span style="color:#000000">),</span> dynamic<span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>mesh<span style="color:#000000">-&gt;</span>vaoId <span style="color:#000000">&gt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_INFO<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;VAO: [ID %i] Mesh uploaded successfully to VRAM (GPU)&quot;</span><span style="color:#000000">,</span> mesh<span style="color:#000000">-&gt;</span>vaoId<span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_INFO<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;VBO: Mesh uploaded successfully to VRAM (GPU)&quot;</span><span style="color:#000000">);</span>
    <span style="color:#010181">rlDisableVertexArray</span><span style="color:#000000">();</span>
<span style="color:#008200">#endif</span>
<span style="color:#000000">}</span>
