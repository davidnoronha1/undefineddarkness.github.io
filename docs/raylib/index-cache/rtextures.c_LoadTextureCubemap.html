TextureCubemap <span style="color:#010181">LoadTextureCubemap</span><span style="color:#000000">(</span>Image image<span style="color:#000000">,</span> <span style="color:#0057ae">int</span> layout<span style="color:#000000">){</span>
    TextureCubemap cubemap <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>layout <span style="color:#000000">==</span> CUBEMAP_LAYOUT_AUTO_DETECT<span style="color:#000000">)</span>      <span style="color:#838183; font-style:italic">// Try to automatically guess layout type</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Check image width/height to determine the type of cubemap provided</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>image<span style="color:#000000">.</span>width <span style="color:#000000">&gt;</span> image<span style="color:#000000">.</span>height<span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">((</span>image<span style="color:#000000">.</span>width<span style="color:#000000">/</span><span style="color:#b07e00">6</span><span style="color:#000000">) ==</span> image<span style="color:#000000">.</span>height<span style="color:#000000">) {</span> layout <span style="color:#000000">=</span> CUBEMAP_LAYOUT_LINE_HORIZONTAL<span style="color:#000000">;</span> cubemap<span style="color:#000000">.</span>width <span style="color:#000000">=</span> image<span style="color:#000000">.</span>width<span style="color:#000000">/</span><span style="color:#b07e00">6</span><span style="color:#000000">; }</span>
            <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">((</span>image<span style="color:#000000">.</span>width<span style="color:#000000">/</span><span style="color:#b07e00">4</span><span style="color:#000000">) == (</span>image<span style="color:#000000">.</span>height<span style="color:#000000">/</span><span style="color:#b07e00">3</span><span style="color:#000000">)) {</span> layout <span style="color:#000000">=</span> CUBEMAP_LAYOUT_CROSS_FOUR_BY_THREE<span style="color:#000000">;</span> cubemap<span style="color:#000000">.</span>width <span style="color:#000000">=</span> image<span style="color:#000000">.</span>width<span style="color:#000000">/</span><span style="color:#b07e00">4</span><span style="color:#000000">; }</span>
            <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span>image<span style="color:#000000">.</span>width <span style="color:#000000">&gt;= (</span><span style="color:#0057ae">int</span><span style="color:#000000">)((</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>image<span style="color:#000000">.</span>height<span style="color:#000000">*</span><span style="color:#b07e00">1.85</span>f<span style="color:#000000">)) {</span> layout <span style="color:#000000">=</span> CUBEMAP_LAYOUT_PANORAMA<span style="color:#000000">;</span> cubemap<span style="color:#000000">.</span>width <span style="color:#000000">=</span> image<span style="color:#000000">.</span>width<span style="color:#000000">/</span><span style="color:#b07e00">4</span><span style="color:#000000">; }</span>
        <span style="color:#000000">}</span>
        <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span>image<span style="color:#000000">.</span>height <span style="color:#000000">&gt;</span> image<span style="color:#000000">.</span>width<span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">((</span>image<span style="color:#000000">.</span>height<span style="color:#000000">/</span><span style="color:#b07e00">6</span><span style="color:#000000">) ==</span> image<span style="color:#000000">.</span>width<span style="color:#000000">) {</span> layout <span style="color:#000000">=</span> CUBEMAP_LAYOUT_LINE_VERTICAL<span style="color:#000000">;</span> cubemap<span style="color:#000000">.</span>width <span style="color:#000000">=</span> image<span style="color:#000000">.</span>height<span style="color:#000000">/</span><span style="color:#b07e00">6</span><span style="color:#000000">; }</span>
            <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">((</span>image<span style="color:#000000">.</span>width<span style="color:#000000">/</span><span style="color:#b07e00">3</span><span style="color:#000000">) == (</span>image<span style="color:#000000">.</span>height<span style="color:#000000">/</span><span style="color:#b07e00">4</span><span style="color:#000000">)) {</span> layout <span style="color:#000000">=</span> CUBEMAP_LAYOUT_CROSS_THREE_BY_FOUR<span style="color:#000000">;</span> cubemap<span style="color:#000000">.</span>width <span style="color:#000000">=</span> image<span style="color:#000000">.</span>width<span style="color:#000000">/</span><span style="color:#b07e00">3</span><span style="color:#000000">; }</span>
        <span style="color:#000000">}</span>
        cubemap<span style="color:#000000">.</span>height <span style="color:#000000">=</span> cubemap<span style="color:#000000">.</span>width<span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    <span style="color:#838183; font-style:italic">// Layout provided or already auto-detected</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>layout <span style="color:#000000">!=</span> CUBEMAP_LAYOUT_AUTO_DETECT<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#0057ae">int</span> size <span style="color:#000000">=</span> cubemap<span style="color:#000000">.</span>width<span style="color:#000000">;</span>
        Image faces <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>                <span style="color:#838183; font-style:italic">// Vertical column image</span>
        Rectangle faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">6</span><span style="color:#000000">] = {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>      <span style="color:#838183; font-style:italic">// Face source rectangles</span>
        <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span> i<span style="color:#000000">++)</span> faceRecs<span style="color:#000000">[</span>i<span style="color:#000000">] = (</span>Rectangle<span style="color:#000000">){</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> <span style="color:#b07e00">0</span><span style="color:#000000">, (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">, (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size <span style="color:#000000">};</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>layout <span style="color:#000000">==</span> CUBEMAP_LAYOUT_LINE_VERTICAL<span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            faces <span style="color:#000000">=</span> <span style="color:#010181">ImageCopy</span><span style="color:#000000">(</span>image<span style="color:#000000">);</span>       <span style="color:#838183; font-style:italic">// Image data already follows expected convention</span>
        <span style="color:#000000">}</span>
        <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span>layout <span style="color:#000000">==</span> CUBEMAP_LAYOUT_PANORAMA<span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            <span style="color:#838183; font-style:italic">// TODO: Convert panorama image to square faces...</span>
            <span style="color:#838183; font-style:italic">// Ref: https://github.com/denivip/panorama/blob/master/panorama.cpp</span>
        <span style="color:#000000">}</span>
        <span style="color:#000000; font-weight:bold">else</span>
        <span style="color:#000000">{</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>layout <span style="color:#000000">==</span> CUBEMAP_LAYOUT_LINE_HORIZONTAL<span style="color:#000000">)</span> <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span> i<span style="color:#000000">++)</span> faceRecs<span style="color:#000000">[</span>i<span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span>i<span style="color:#000000">;</span>
            <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span>layout <span style="color:#000000">==</span> CUBEMAP_LAYOUT_CROSS_THREE_BY_FOUR<span style="color:#000000">)</span>
            <span style="color:#000000">{</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">1</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">1</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">2</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">2</span><span style="color:#000000">].</span>y <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">3</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">3</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span><span style="color:#b07e00">2</span><span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">].</span>x <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">5</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span><span style="color:#b07e00">2</span><span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">5</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span>
            <span style="color:#000000">}</span>
            <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span>layout <span style="color:#000000">==</span> CUBEMAP_LAYOUT_CROSS_FOUR_BY_THREE<span style="color:#000000">)</span>
            <span style="color:#000000">{</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span><span style="color:#b07e00">2</span><span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">0</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">1</span><span style="color:#000000">].</span>x <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">1</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">2</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">2</span><span style="color:#000000">].</span>y <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">3</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">3</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span><span style="color:#b07e00">2</span><span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">4</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span>
                faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">5</span><span style="color:#000000">].</span>x <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">;</span> faceRecs<span style="color:#000000">[</span><span style="color:#b07e00">5</span><span style="color:#000000">].</span>y <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">;</span>
            <span style="color:#000000">}</span>
            <span style="color:#838183; font-style:italic">// Convert image data to 6 faces in a vertical column, that&apos;s the optimum layout for loading</span>
            faces <span style="color:#000000">=</span> <span style="color:#010181">GenImageColor</span><span style="color:#000000">(</span>size<span style="color:#000000">,</span> size<span style="color:#000000">*</span><span style="color:#b07e00">6</span><span style="color:#000000">,</span> MAGENTA<span style="color:#000000">);</span>
            <span style="color:#010181">ImageFormat</span><span style="color:#000000">(&amp;</span>faces<span style="color:#000000">,</span> image<span style="color:#000000">.</span>format<span style="color:#000000">);</span>
            <span style="color:#838183; font-style:italic">// NOTE: Image formatting does not work with compressed textures</span>
            <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span> i<span style="color:#000000">++)</span> <span style="color:#010181">ImageDraw</span><span style="color:#000000">(&amp;</span>faces<span style="color:#000000">,</span> image<span style="color:#000000">,</span> faceRecs<span style="color:#000000">[</span>i<span style="color:#000000">], (</span>Rectangle<span style="color:#000000">){</span> <span style="color:#b07e00">0</span><span style="color:#000000">, (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">*</span>i<span style="color:#000000">, (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size<span style="color:#000000">, (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>size <span style="color:#000000">},</span> WHITE<span style="color:#000000">);</span>
        <span style="color:#000000">}</span>
        <span style="color:#838183; font-style:italic">// NOTE: Cubemap data is expected to be provided as 6 images in a single data array,</span>
        <span style="color:#838183; font-style:italic">// one after the other (that&apos;s a vertical image), following convention: +X, -X, +Y, -Y, +Z, -Z</span>
        cubemap<span style="color:#000000">.</span>id <span style="color:#000000">=</span> <span style="color:#010181">rlLoadTextureCubemap</span><span style="color:#000000">(</span>faces<span style="color:#000000">.</span>data<span style="color:#000000">,</span> size<span style="color:#000000">,</span> faces<span style="color:#000000">.</span>format<span style="color:#000000">);</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>cubemap<span style="color:#000000">.</span>id <span style="color:#000000">==</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;IMAGE: Failed to load cubemap image&quot;</span><span style="color:#000000">);</span>
        <span style="color:#010181">UnloadImage</span><span style="color:#000000">(</span>faces<span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;IMAGE: Failed to detect cubemap image layout&quot;</span><span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">return</span> cubemap<span style="color:#000000">;</span>
<span style="color:#000000">}</span>
