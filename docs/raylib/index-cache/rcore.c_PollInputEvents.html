<span style="color:#0057ae">void</span> <span style="color:#010181">PollInputEvents</span><span style="color:#000000">(</span><span style="color:#0057ae">void</span><span style="color:#000000">){</span>
<span style="color:#008200">#if defined(SUPPORT_GESTURES_SYSTEM)</span>
    <span style="color:#838183; font-style:italic">// NOTE: Gestures update must be called every frame to reset gestures correctly</span>
    <span style="color:#838183; font-style:italic">// because ProcessGestureEvent() is just called on an event, not every frame</span>
    <span style="color:#010181">UpdateGestures</span><span style="color:#000000">();</span>
<span style="color:#008200">#endif</span>
    <span style="color:#838183; font-style:italic">// Reset keys/chars pressed registered</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>keyPressedQueueCount <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>charPressedQueueCount <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
<span style="color:#008200">#if !(defined(PLATFORM_RPI) || defined(PLATFORM_DRM))</span>
    <span style="color:#838183; font-style:italic">// Reset last gamepad button/axis registered state</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>lastButtonPressed <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>       <span style="color:#838183; font-style:italic">// GAMEPAD_BUTTON_UNKNOWN</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>axisCount <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(PLATFORM_RPI) || defined(PLATFORM_DRM)</span>
    <span style="color:#838183; font-style:italic">// Register previous keys states</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_KEYBOARD_KEYS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>previousKeyState<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>currentKeyState<span style="color:#000000">[</span>i<span style="color:#000000">];</span>
    <span style="color:#010181">PollKeyboardEvents</span><span style="color:#000000">();</span>
    <span style="color:#838183; font-style:italic">// Register previous mouse states</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>previousWheelMove <span style="color:#000000">=</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentWheelMove<span style="color:#000000">;</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentWheelMove <span style="color:#000000">= (</span>Vector2<span style="color:#000000">){</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_MOUSE_BUTTONS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>previousButtonState<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">];</span>
        CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentButtonStateEvdev<span style="color:#000000">[</span>i<span style="color:#000000">];</span>
    <span style="color:#000000">}</span>
    <span style="color:#838183; font-style:italic">// Register gamepads buttons events</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_GAMEPADS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>ready<span style="color:#000000">[</span>i<span style="color:#000000">])</span>
        <span style="color:#000000">{</span>
            <span style="color:#838183; font-style:italic">// Register previous gamepad states</span>
            <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> k <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> k <span style="color:#000000">&lt;</span> MAX_GAMEPAD_BUTTONS<span style="color:#000000">;</span> k<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>previousButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>k<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>k<span style="color:#000000">];</span>
        <span style="color:#000000">}</span>
    <span style="color:#000000">}</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(PLATFORM_DESKTOP) || defined(PLATFORM_WEB)</span>
    <span style="color:#838183; font-style:italic">// Keyboard/Mouse input polling (automatically managed by GLFW3 through callback)</span>
    <span style="color:#838183; font-style:italic">// Register previous keys states</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_KEYBOARD_KEYS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>previousKeyState<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>currentKeyState<span style="color:#000000">[</span>i<span style="color:#000000">];</span>
    <span style="color:#838183; font-style:italic">// Register previous mouse states</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_MOUSE_BUTTONS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>previousButtonState<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">];</span>
    <span style="color:#838183; font-style:italic">// Register previous mouse wheel state</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>previousWheelMove <span style="color:#000000">=</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentWheelMove<span style="color:#000000">;</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentWheelMove <span style="color:#000000">= (</span>Vector2<span style="color:#000000">){</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
    <span style="color:#838183; font-style:italic">// Register previous mouse position</span>
    CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>previousPosition <span style="color:#000000">=</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Mouse<span style="color:#000000">.</span>currentPosition<span style="color:#000000">;</span>
<span style="color:#008200">#endif</span>
    <span style="color:#838183; font-style:italic">// Register previous touch states</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_TOUCH_POINTS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Touch<span style="color:#000000">.</span>previousTouchState<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Touch<span style="color:#000000">.</span>currentTouchState<span style="color:#000000">[</span>i<span style="color:#000000">];</span>
    <span style="color:#838183; font-style:italic">// Reset touch positions</span>
    <span style="color:#838183; font-style:italic">// TODO: It resets on PLATFORM_WEB the mouse position and not filled again until a move-event,</span>
    <span style="color:#838183; font-style:italic">// so, if mouse is not moved it returns a (0, 0) position... this behaviour should be reviewed!</span>
    <span style="color:#838183; font-style:italic">//for (int i = 0; i &lt; MAX_TOUCH_POINTS; i++) CORE.Input.Touch.position[i] = (Vector2){ 0, 0 };</span>
<span style="color:#008200">#if defined(PLATFORM_DESKTOP)</span>
    <span style="color:#838183; font-style:italic">// Check if gamepads are ready</span>
    <span style="color:#838183; font-style:italic">// NOTE: We do it here in case of disconnection</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_GAMEPADS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">glfwJoystickPresent</span><span style="color:#000000">(</span>i<span style="color:#000000">))</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>ready<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> <span style="color:#000000; font-weight:bold">true</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">else</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>ready<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    <span style="color:#838183; font-style:italic">// Register gamepads buttons events</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> MAX_GAMEPADS<span style="color:#000000">;</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>ready<span style="color:#000000">[</span>i<span style="color:#000000">])</span>     <span style="color:#838183; font-style:italic">// Check if gamepad is available</span>
        <span style="color:#000000">{</span>
            <span style="color:#838183; font-style:italic">// Register previous gamepad states</span>
            <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> k <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> k <span style="color:#000000">&lt;</span> MAX_GAMEPAD_BUTTONS<span style="color:#000000">;</span> k<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>previousButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>k<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>k<span style="color:#000000">];</span>
            <span style="color:#838183; font-style:italic">// Get current gamepad state</span>
            <span style="color:#838183; font-style:italic">// NOTE: There is no callback available, so we get it manually</span>
            <span style="color:#838183; font-style:italic">// Get remapped buttons</span>
            GLFWgamepadstate state <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
            <span style="color:#010181">glfwGetGamepadState</span><span style="color:#000000">(</span>i<span style="color:#000000">, &amp;</span>state<span style="color:#000000">);</span> <span style="color:#838183; font-style:italic">// This remapps all gamepads so they have their buttons mapped like an xbox controller</span>
            <span style="color:#0057ae">const unsigned char</span> <span style="color:#000000">*</span>buttons <span style="color:#000000">=</span> state<span style="color:#000000">.</span>buttons<span style="color:#000000">;</span>
            <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> k <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">; (</span>buttons <span style="color:#000000">!=</span> NULL<span style="color:#000000">) &amp;&amp; (</span>k <span style="color:#000000">&lt;</span> GLFW_GAMEPAD_BUTTON_DPAD_LEFT <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">) &amp;&amp; (</span>k <span style="color:#000000">&lt;</span> MAX_GAMEPAD_BUTTONS<span style="color:#000000">);</span> k<span style="color:#000000">++)</span>
            <span style="color:#000000">{</span>
                GamepadButton button <span style="color:#000000">= -</span><span style="color:#b07e00">1</span><span style="color:#000000">;</span>
                <span style="color:#000000; font-weight:bold">switch</span> <span style="color:#000000">(</span>k<span style="color:#000000">)</span>
                <span style="color:#000000">{</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_Y<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_UP<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_B<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_RIGHT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_A<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_DOWN<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_X<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_LEFT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_LEFT_BUMPER<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_TRIGGER_1<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_RIGHT_BUMPER<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_TRIGGER_1<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_BACK<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_MIDDLE_LEFT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_GUIDE<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_MIDDLE<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_START<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_MIDDLE_RIGHT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_DPAD_UP<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_UP<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_DPAD_RIGHT<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_RIGHT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_DPAD_DOWN<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_DOWN<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_DPAD_LEFT<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_LEFT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_LEFT_THUMB<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_THUMB<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> GLFW_GAMEPAD_BUTTON_RIGHT_THUMB<span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_THUMB<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">default</span><span style="color:#000000">:</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
                <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>button <span style="color:#000000">!= -</span><span style="color:#b07e00">1</span><span style="color:#000000">)</span>   <span style="color:#838183; font-style:italic">// Check for valid button</span>
                <span style="color:#000000">{</span>
                    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>buttons<span style="color:#000000">[</span>k<span style="color:#000000">] ==</span> GLFW_PRESS<span style="color:#000000">)</span>
                    <span style="color:#000000">{</span>
                        CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>button<span style="color:#000000">] =</span> <span style="color:#b07e00">1</span><span style="color:#000000">;</span>
                        CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>lastButtonPressed <span style="color:#000000">=</span> button<span style="color:#000000">;</span>
                    <span style="color:#000000">}</span>
                    <span style="color:#000000; font-weight:bold">else</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>button<span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
            <span style="color:#000000">}</span>
            <span style="color:#838183; font-style:italic">// Get current axis state</span>
            <span style="color:#0057ae">const float</span> <span style="color:#000000">*</span>axes <span style="color:#000000">=</span> state<span style="color:#000000">.</span>axes<span style="color:#000000">;</span>
            <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> k <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">; (</span>axes <span style="color:#000000">!=</span> NULL<span style="color:#000000">) &amp;&amp; (</span>k <span style="color:#000000">&lt;</span> GLFW_GAMEPAD_AXIS_LAST <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">) &amp;&amp; (</span>k <span style="color:#000000">&lt;</span> MAX_GAMEPAD_AXIS<span style="color:#000000">);</span> k<span style="color:#000000">++)</span>
            <span style="color:#000000">{</span>
                CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>axisState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>k<span style="color:#000000">] =</span> axes<span style="color:#000000">[</span>k<span style="color:#000000">];</span>
            <span style="color:#000000">}</span>
            <span style="color:#838183; font-style:italic">// Register buttons for 2nd triggers (because GLFW doesn&apos;t count these as buttons but rather axis)</span>
            CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>GAMEPAD_BUTTON_LEFT_TRIGGER_2<span style="color:#000000">] = (</span><span style="color:#0057ae">char</span><span style="color:#000000">)(</span>CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>axisState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>GAMEPAD_AXIS_LEFT_TRIGGER<span style="color:#000000">] &gt;</span> <span style="color:#b07e00">0.1</span>f<span style="color:#000000">);</span>
            CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>GAMEPAD_BUTTON_RIGHT_TRIGGER_2<span style="color:#000000">] = (</span><span style="color:#0057ae">char</span><span style="color:#000000">)(</span>CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>axisState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>GAMEPAD_AXIS_RIGHT_TRIGGER<span style="color:#000000">] &gt;</span> <span style="color:#b07e00">0.1</span>f<span style="color:#000000">);</span>
            CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>axisCount <span style="color:#000000">=</span> GLFW_GAMEPAD_AXIS_LAST <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">;</span>
        <span style="color:#000000">}</span>
    <span style="color:#000000">}</span>
    CORE<span style="color:#000000">.</span>Window<span style="color:#000000">.</span>resizedLastFrame <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>CORE<span style="color:#000000">.</span>Window<span style="color:#000000">.</span>eventWaiting<span style="color:#000000">)</span> <span style="color:#010181">glfwWaitEvents</span><span style="color:#000000">();</span>     <span style="color:#838183; font-style:italic">// Wait for in input events before continue (drawing is paused)</span>
    <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">glfwPollEvents</span><span style="color:#000000">();</span>      <span style="color:#838183; font-style:italic">// Poll input events: keyboard/mouse/window events (callbacks)</span>
<span style="color:#008200">#endif</span>  <span style="color:#838183; font-style:italic">// PLATFORM_DESKTOP</span>
<span style="color:#008200"></span><span style="color:#008200">#if defined(PLATFORM_WEB)</span>
    CORE<span style="color:#000000">.</span>Window<span style="color:#000000">.</span>resizedLastFrame <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">;</span>
<span style="color:#008200">#endif</span>  <span style="color:#838183; font-style:italic">// PLATFORM_WEB</span>
<span style="color:#008200"></span><span style="color:#008200">#if defined(PLATFORM_WEB)</span>
    <span style="color:#838183; font-style:italic">// Get number of gamepads connected</span>
    <span style="color:#0057ae">int</span> numGamepads <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">emscripten_sample_gamepad_data</span><span style="color:#000000">() ==</span> EMSCRIPTEN_RESULT_SUCCESS<span style="color:#000000">)</span> numGamepads <span style="color:#000000">=</span> <span style="color:#010181">emscripten_get_num_gamepads</span><span style="color:#000000">();</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">; (</span>i <span style="color:#000000">&lt;</span> numGamepads<span style="color:#000000">) &amp;&amp; (</span>i <span style="color:#000000">&lt;</span> MAX_GAMEPADS<span style="color:#000000">);</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Register previous gamepad button states</span>
        <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> k <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> k <span style="color:#000000">&lt;</span> MAX_GAMEPAD_BUTTONS<span style="color:#000000">;</span> k<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>previousButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>k<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>k<span style="color:#000000">];</span>
        EmscriptenGamepadEvent gamepadState<span style="color:#000000">;</span>
        <span style="color:#0057ae">int</span> result <span style="color:#000000">=</span> <span style="color:#010181">emscripten_get_gamepad_status</span><span style="color:#000000">(</span>i<span style="color:#000000">, &amp;</span>gamepadState<span style="color:#000000">);</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>result <span style="color:#000000">==</span> EMSCRIPTEN_RESULT_SUCCESS<span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            <span style="color:#838183; font-style:italic">// Register buttons data for every connected gamepad</span>
            <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> j <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">; (</span>j <span style="color:#000000">&lt;</span> gamepadState<span style="color:#000000">.</span>numButtons<span style="color:#000000">) &amp;&amp; (</span>j <span style="color:#000000">&lt;</span> MAX_GAMEPAD_BUTTONS<span style="color:#000000">);</span> j<span style="color:#000000">++)</span>
            <span style="color:#000000">{</span>
                GamepadButton button <span style="color:#000000">= -</span><span style="color:#b07e00">1</span><span style="color:#000000">;</span>
                <span style="color:#838183; font-style:italic">// Gamepad Buttons reference: https://www.w3.org/TR/gamepad/#gamepad-interface</span>
                <span style="color:#000000; font-weight:bold">switch</span> <span style="color:#000000">(</span>j<span style="color:#000000">)</span>
                <span style="color:#000000">{</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">0</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_DOWN<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">1</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_RIGHT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">2</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_LEFT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">3</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_FACE_UP<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">4</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_TRIGGER_1<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">5</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_TRIGGER_1<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">6</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_TRIGGER_2<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">7</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_TRIGGER_2<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">8</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_MIDDLE_LEFT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">9</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_MIDDLE_RIGHT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">10</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_THUMB<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">11</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_RIGHT_THUMB<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">12</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_UP<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">13</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_DOWN<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">14</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_LEFT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">case</span> <span style="color:#b07e00">15</span><span style="color:#000000">:</span> button <span style="color:#000000">=</span> GAMEPAD_BUTTON_LEFT_FACE_RIGHT<span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                    <span style="color:#000000; font-weight:bold">default</span><span style="color:#000000">:</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
                <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>button <span style="color:#000000">!= -</span><span style="color:#b07e00">1</span><span style="color:#000000">)</span>   <span style="color:#838183; font-style:italic">// Check for valid button</span>
                <span style="color:#000000">{</span>
                    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>gamepadState<span style="color:#000000">.</span>digitalButton<span style="color:#000000">[</span>j<span style="color:#000000">] ==</span> <span style="color:#b07e00">1</span><span style="color:#000000">)</span>
                    <span style="color:#000000">{</span>
                        CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>button<span style="color:#000000">] =</span> <span style="color:#b07e00">1</span><span style="color:#000000">;</span>
                        CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>lastButtonPressed <span style="color:#000000">=</span> button<span style="color:#000000">;</span>
                    <span style="color:#000000">}</span>
                    <span style="color:#000000; font-weight:bold">else</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>currentButtonState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>button<span style="color:#000000">] =</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
                <span style="color:#838183; font-style:italic">//TRACELOGD(&quot;INPUT: Gamepad %d, button %d: Digital: %d, Analog: %g&quot;, gamepadState.index, j, gamepadState.digitalButton[j], gamepadState.analogButton[j]);</span>
            <span style="color:#000000">}</span>
            <span style="color:#838183; font-style:italic">// Register axis data for every connected gamepad</span>
            <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> j <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">; (</span>j <span style="color:#000000">&lt;</span> gamepadState<span style="color:#000000">.</span>numAxes<span style="color:#000000">) &amp;&amp; (</span>j <span style="color:#000000">&lt;</span> MAX_GAMEPAD_AXIS<span style="color:#000000">);</span> j<span style="color:#000000">++)</span>
            <span style="color:#000000">{</span>
                CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>axisState<span style="color:#000000">[</span>i<span style="color:#000000">][</span>j<span style="color:#000000">] =</span> gamepadState<span style="color:#000000">.</span>axis<span style="color:#000000">[</span>j<span style="color:#000000">];</span>
            <span style="color:#000000">}</span>
            CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Gamepad<span style="color:#000000">.</span>axisCount <span style="color:#000000">=</span> gamepadState<span style="color:#000000">.</span>numAxes<span style="color:#000000">;</span>
        <span style="color:#000000">}</span>
    <span style="color:#000000">}</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(PLATFORM_ANDROID)</span>
    <span style="color:#838183; font-style:italic">// Register previous keys states</span>
    <span style="color:#838183; font-style:italic">// NOTE: Android supports up to 260 keys</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> <span style="color:#b07e00">260</span><span style="color:#000000">;</span> i<span style="color:#000000">++)</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>previousKeyState<span style="color:#000000">[</span>i<span style="color:#000000">] =</span> CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>currentKeyState<span style="color:#000000">[</span>i<span style="color:#000000">];</span>
    <span style="color:#838183; font-style:italic">// Android ALooper_pollAll() variables</span>
    <span style="color:#0057ae">int</span> pollResult <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    <span style="color:#0057ae">int</span> pollEvents <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    <span style="color:#838183; font-style:italic">// Poll Events (registered events)</span>
    <span style="color:#838183; font-style:italic">// NOTE: Activity is paused if not enabled (CORE.Android.appEnabled)</span>
    <span style="color:#000000; font-weight:bold">while</span> <span style="color:#000000">((</span>pollResult <span style="color:#000000">=</span> <span style="color:#010181">ALooper_pollAll</span><span style="color:#000000">(</span>CORE<span style="color:#000000">.</span>Android<span style="color:#000000">.</span>appEnabled<span style="color:#000000">?</span> <span style="color:#b07e00">0</span> <span style="color:#000000">: -</span><span style="color:#b07e00">1</span><span style="color:#000000">,</span> NULL<span style="color:#000000">, &amp;</span>pollEvents<span style="color:#000000">, (</span><span style="color:#0057ae">void</span><span style="color:#000000">**)&amp;</span>CORE<span style="color:#000000">.</span>Android<span style="color:#000000">.</span>source<span style="color:#000000">)) &gt;=</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Process this event</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>CORE<span style="color:#000000">.</span>Android<span style="color:#000000">.</span>source <span style="color:#000000">!=</span> NULL<span style="color:#000000">)</span> CORE<span style="color:#000000">.</span>Android<span style="color:#000000">.</span>source<span style="color:#000000">-&gt;</span><span style="color:#010181">process</span><span style="color:#000000">(</span>CORE<span style="color:#000000">.</span>Android<span style="color:#000000">.</span>app<span style="color:#000000">,</span> CORE<span style="color:#000000">.</span>Android<span style="color:#000000">.</span>source<span style="color:#000000">);</span>
        <span style="color:#838183; font-style:italic">// NOTE: Never close window, native activity is controlled by the system!</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>CORE<span style="color:#000000">.</span>Android<span style="color:#000000">.</span>app<span style="color:#000000">-&gt;</span>destroyRequested <span style="color:#000000">!=</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            <span style="color:#838183; font-style:italic">//CORE.Window.shouldClose = true;</span>
            <span style="color:#838183; font-style:italic">//ANativeActivity_finish(CORE.Android.app-&gt;activity);</span>
        <span style="color:#000000">}</span>
    <span style="color:#000000">}</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if (defined(PLATFORM_RPI) || defined(PLATFORM_DRM)) &amp;&amp; defined(SUPPORT_SSH_KEYBOARD_RPI)</span>
    <span style="color:#838183; font-style:italic">// NOTE: Keyboard reading could be done using input_event(s) or just read from stdin, both methods are used here.</span>
    <span style="color:#838183; font-style:italic">// stdin reading is still used for legacy purposes, it allows keyboard input trough SSH console</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(!</span>CORE<span style="color:#000000">.</span>Input<span style="color:#000000">.</span>Keyboard<span style="color:#000000">.</span>evtMode<span style="color:#000000">)</span> <span style="color:#010181">ProcessKeyboard</span><span style="color:#000000">();</span>
    <span style="color:#838183; font-style:italic">// NOTE: Mouse input events polling is done asynchronously in another pthread - EventThread()</span>
    <span style="color:#838183; font-style:italic">// NOTE: Gamepad (Joystick) input events polling is done asynchonously in another pthread - GamepadThread()</span>
<span style="color:#008200">#endif</span>
<span style="color:#000000">}</span>
