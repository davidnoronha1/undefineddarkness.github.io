Mesh <span style="color:#010181">GenMeshCubicmap</span><span style="color:#000000">(</span>Image cubicmap<span style="color:#000000">,</span> Vector3 cubeSize<span style="color:#000000">){</span>
    <span style="color:#008200">#define COLOR_EQUAL(col1, col2) ((col1.r == col2.r)&amp;&amp;(col1.g == col2.g)&amp;&amp;(col1.b == col2.b)&amp;&amp;(col1.a == col2.a))</span>
    Mesh mesh <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
    Color <span style="color:#000000">*</span>pixels <span style="color:#000000">=</span> <span style="color:#010181">LoadImageColors</span><span style="color:#000000">(</span>cubicmap<span style="color:#000000">);</span>
    <span style="color:#838183; font-style:italic">// NOTE: Max possible number of triangles numCubes*(12 triangles by cube)</span>
    <span style="color:#0057ae">int</span> maxTriangles <span style="color:#000000">=</span> cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">*</span> cubicmap<span style="color:#000000">.</span>height <span style="color:#000000">*</span> <span style="color:#b07e00">12</span><span style="color:#000000">;</span>
    <span style="color:#0057ae">int</span> vCounter <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>       <span style="color:#838183; font-style:italic">// Used to count vertices</span>
    <span style="color:#0057ae">int</span> tcCounter <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>      <span style="color:#838183; font-style:italic">// Used to count texcoords</span>
    <span style="color:#0057ae">int</span> nCounter <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>       <span style="color:#838183; font-style:italic">// Used to count normals</span>
    <span style="color:#0057ae">float</span> w <span style="color:#000000">=</span> cubeSize<span style="color:#000000">.</span>x<span style="color:#000000">;</span>
    <span style="color:#0057ae">float</span> h <span style="color:#000000">=</span> cubeSize<span style="color:#000000">.</span>z<span style="color:#000000">;</span>
    <span style="color:#0057ae">float</span> h2 <span style="color:#000000">=</span> cubeSize<span style="color:#000000">.</span>y<span style="color:#000000">;</span>
    Vector3 <span style="color:#000000">*</span>mapVertices <span style="color:#000000">= (</span>Vector3 <span style="color:#000000">*)</span><span style="color:#010181">RL_MALLOC</span><span style="color:#000000">(</span>maxTriangles<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span>Vector3<span style="color:#000000">));</span>
    Vector2 <span style="color:#000000">*</span>mapTexcoords <span style="color:#000000">= (</span>Vector2 <span style="color:#000000">*)</span><span style="color:#010181">RL_MALLOC</span><span style="color:#000000">(</span>maxTriangles<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span>Vector2<span style="color:#000000">));</span>
    Vector3 <span style="color:#000000">*</span>mapNormals <span style="color:#000000">= (</span>Vector3 <span style="color:#000000">*)</span><span style="color:#010181">RL_MALLOC</span><span style="color:#000000">(</span>maxTriangles<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span>Vector3<span style="color:#000000">));</span>
    <span style="color:#838183; font-style:italic">// Define the 6 normals of the cube, we will combine them accordingly later...</span>
    Vector3 n1 <span style="color:#000000">= {</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
    Vector3 n2 <span style="color:#000000">= { -</span><span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
    Vector3 n3 <span style="color:#000000">= {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
    Vector3 n4 <span style="color:#000000">= {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">, -</span><span style="color:#b07e00">1.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f <span style="color:#000000">};</span>
    Vector3 n5 <span style="color:#000000">= {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">, -</span><span style="color:#b07e00">1.0</span>f <span style="color:#000000">};</span>
    Vector3 n6 <span style="color:#000000">= {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f <span style="color:#000000">};</span>
    <span style="color:#838183; font-style:italic">// NOTE: We use texture rectangles to define different textures for top-bottom-front-back-right-left (6)</span>
    <span style="color:#000000; font-weight:bold">typedef</span> <span style="color:#0057ae">struct</span> RectangleF <span style="color:#000000">{</span>
        <span style="color:#0057ae">float</span> x<span style="color:#000000">;</span>
        <span style="color:#0057ae">float</span> y<span style="color:#000000">;</span>
        <span style="color:#0057ae">float</span> width<span style="color:#000000">;</span>
        <span style="color:#0057ae">float</span> height<span style="color:#000000">;</span>
    <span style="color:#000000">}</span> RectangleF<span style="color:#000000">;</span>
    RectangleF rightTexUV <span style="color:#000000">= {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f <span style="color:#000000">};</span>
    RectangleF leftTexUV <span style="color:#000000">= {</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f <span style="color:#000000">};</span>
    RectangleF frontTexUV <span style="color:#000000">= {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f <span style="color:#000000">};</span>
    RectangleF backTexUV <span style="color:#000000">= {</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f <span style="color:#000000">};</span>
    RectangleF topTexUV <span style="color:#000000">= {</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f <span style="color:#000000">};</span>
    RectangleF bottomTexUV <span style="color:#000000">= {</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.5</span>f <span style="color:#000000">};</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> z <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> z <span style="color:#000000">&lt;</span> cubicmap<span style="color:#000000">.</span>height<span style="color:#000000">; ++</span>z<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> x <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> x <span style="color:#000000">&lt;</span> cubicmap<span style="color:#000000">.</span>width<span style="color:#000000">; ++</span>x<span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            <span style="color:#838183; font-style:italic">// Define the 8 vertex of the cube, we will combine them accordingly later...</span>
            Vector3 v1 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> h2<span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            Vector3 v2 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> h2<span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            Vector3 v3 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> h2<span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            Vector3 v4 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> h2<span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            Vector3 v5 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            Vector3 v6 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            Vector3 v7 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">-</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            Vector3 v8 <span style="color:#000000">= {</span> w<span style="color:#000000">*(</span>x <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">),</span> <span style="color:#b07e00">0</span><span style="color:#000000">,</span> h<span style="color:#000000">*(</span>z <span style="color:#000000">+</span> <span style="color:#b07e00">0.5</span>f<span style="color:#000000">) };</span>
            <span style="color:#838183; font-style:italic">// We check pixel color to be WHITE -&gt; draw full cube</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">COLOR_EQUAL</span><span style="color:#000000">(</span>pixels<span style="color:#000000">[</span>z<span style="color:#000000">*</span>cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">+</span> x<span style="color:#000000">],</span> WHITE<span style="color:#000000">))</span>
            <span style="color:#000000">{</span>
                <span style="color:#838183; font-style:italic">// Define triangles and checking collateral cubes</span>
                <span style="color:#838183; font-style:italic">//------------------------------------------------</span>
                <span style="color:#838183; font-style:italic">// Define top triangles (2 tris, 6 vertex --&gt; v1-v2-v3, v1-v3-v4)</span>
                <span style="color:#838183; font-style:italic">// WARNING: Not required for a WHITE cubes, created to allow seeing the map from outside</span>
                mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v2<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v3<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v3<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v4<span style="color:#000000">;</span>
                vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                <span style="color:#838183; font-style:italic">// Define bottom triangles (2 tris, 6 vertex --&gt; v6-v8-v7, v6-v5-v8)</span>
                mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v6<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v8<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v7<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v6<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v5<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v8<span style="color:#000000">;</span>
                vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                <span style="color:#838183; font-style:italic">// Checking cube on bottom of current cube</span>
                <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(((</span>z <span style="color:#000000">&lt;</span> cubicmap<span style="color:#000000">.</span>height <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">) &amp;&amp;</span> <span style="color:#010181">COLOR_EQUAL</span><span style="color:#000000">(</span>pixels<span style="color:#000000">[(</span>z <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">)*</span>cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">+</span> x<span style="color:#000000">],</span> BLACK<span style="color:#000000">)) || (</span>z <span style="color:#000000">==</span> cubicmap<span style="color:#000000">.</span>height <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">))</span>
                <span style="color:#000000">{</span>
                    <span style="color:#838183; font-style:italic">// Define front triangles (2 tris, 6 vertex) --&gt; v2 v7 v3, v3 v7 v8</span>
                    <span style="color:#838183; font-style:italic">// NOTE: Collateral occluded faces are not generated</span>
                    mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v2<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v7<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v3<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v3<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v7<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v8<span style="color:#000000">;</span>
                    vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n6<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n6<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n6<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n6<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n6<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n6<span style="color:#000000">;</span>
                    nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> frontTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> frontTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> frontTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> frontTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> frontTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> frontTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> frontTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> frontTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> frontTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> frontTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> frontTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> frontTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> frontTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> frontTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> frontTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> frontTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> frontTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> frontTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
                <span style="color:#838183; font-style:italic">// Checking cube on top of current cube</span>
                <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(((</span>z <span style="color:#000000">&gt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">) &amp;&amp;</span> <span style="color:#010181">COLOR_EQUAL</span><span style="color:#000000">(</span>pixels<span style="color:#000000">[(</span>z <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">)*</span>cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">+</span> x<span style="color:#000000">],</span> BLACK<span style="color:#000000">)) || (</span>z <span style="color:#000000">==</span> <span style="color:#b07e00">0</span><span style="color:#000000">))</span>
                <span style="color:#000000">{</span>
                    <span style="color:#838183; font-style:italic">// Define back triangles (2 tris, 6 vertex) --&gt; v1 v5 v6, v1 v4 v5</span>
                    <span style="color:#838183; font-style:italic">// NOTE: Collateral occluded faces are not generated</span>
                    mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v5<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v6<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v4<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v5<span style="color:#000000">;</span>
                    vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n5<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n5<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n5<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n5<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n5<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n5<span style="color:#000000">;</span>
                    nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> backTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> backTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> backTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> backTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> backTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> backTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> backTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> backTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> backTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> backTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> backTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> backTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> backTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> backTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> backTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> backTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> backTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> backTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
                <span style="color:#838183; font-style:italic">// Checking cube on right of current cube</span>
                <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(((</span>x <span style="color:#000000">&lt;</span> cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">) &amp;&amp;</span> <span style="color:#010181">COLOR_EQUAL</span><span style="color:#000000">(</span>pixels<span style="color:#000000">[</span>z<span style="color:#000000">*</span>cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">+ (</span>x <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">)],</span> BLACK<span style="color:#000000">)) || (</span>x <span style="color:#000000">==</span> cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">))</span>
                <span style="color:#000000">{</span>
                    <span style="color:#838183; font-style:italic">// Define right triangles (2 tris, 6 vertex) --&gt; v3 v8 v4, v4 v8 v5</span>
                    <span style="color:#838183; font-style:italic">// NOTE: Collateral occluded faces are not generated</span>
                    mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v3<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v8<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v4<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v4<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v8<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v5<span style="color:#000000">;</span>
                    vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n1<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n1<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n1<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n1<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n1<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n1<span style="color:#000000">;</span>
                    nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> rightTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> rightTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> rightTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> rightTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> rightTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> rightTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> rightTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> rightTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> rightTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> rightTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> rightTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> rightTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> rightTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> rightTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> rightTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> rightTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> rightTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> rightTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
                <span style="color:#838183; font-style:italic">// Checking cube on left of current cube</span>
                <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(((</span>x <span style="color:#000000">&gt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">) &amp;&amp;</span> <span style="color:#010181">COLOR_EQUAL</span><span style="color:#000000">(</span>pixels<span style="color:#000000">[</span>z<span style="color:#000000">*</span>cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">+ (</span>x <span style="color:#000000">-</span> <span style="color:#b07e00">1</span><span style="color:#000000">)],</span> BLACK<span style="color:#000000">)) || (</span>x <span style="color:#000000">==</span> <span style="color:#b07e00">0</span><span style="color:#000000">))</span>
                <span style="color:#000000">{</span>
                    <span style="color:#838183; font-style:italic">// Define left triangles (2 tris, 6 vertex) --&gt; v1 v7 v2, v1 v6 v7</span>
                    <span style="color:#838183; font-style:italic">// NOTE: Collateral occluded faces are not generated</span>
                    mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v7<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v2<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v6<span style="color:#000000">;</span>
                    mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v7<span style="color:#000000">;</span>
                    vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n2<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n2<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n2<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n2<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n2<span style="color:#000000">;</span>
                    mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n2<span style="color:#000000">;</span>
                    nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> leftTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> leftTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> leftTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> leftTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> leftTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> leftTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> leftTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> leftTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> leftTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> leftTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> leftTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> leftTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> leftTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> leftTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> leftTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> leftTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> leftTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> leftTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                    tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                <span style="color:#000000">}</span>
            <span style="color:#000000">}</span>
            <span style="color:#838183; font-style:italic">// We check pixel color to be BLACK, we will only draw floor and roof</span>
            <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span><span style="color:#010181">COLOR_EQUAL</span><span style="color:#000000">(</span>pixels<span style="color:#000000">[</span>z<span style="color:#000000">*</span>cubicmap<span style="color:#000000">.</span>width <span style="color:#000000">+</span> x<span style="color:#000000">],</span> BLACK<span style="color:#000000">))</span>
            <span style="color:#000000">{</span>
                <span style="color:#838183; font-style:italic">// Define top triangles (2 tris, 6 vertex --&gt; v1-v2-v3, v1-v3-v4)</span>
                mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v3<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v2<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v1<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v4<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v3<span style="color:#000000">;</span>
                vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n4<span style="color:#000000">;</span>
                nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> topTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> topTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> topTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                <span style="color:#838183; font-style:italic">// Define bottom triangles (2 tris, 6 vertex --&gt; v6-v8-v7, v6-v5-v8)</span>
                mapVertices<span style="color:#000000">[</span>vCounter<span style="color:#000000">] =</span> v6<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> v7<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> v8<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> v6<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> v8<span style="color:#000000">;</span>
                mapVertices<span style="color:#000000">[</span>vCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> v5<span style="color:#000000">;</span>
                vCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter<span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                mapNormals<span style="color:#000000">[</span>nCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] =</span> n3<span style="color:#000000">;</span>
                nCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter<span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">3</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>width<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">4</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">+</span> bottomTexUV<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
                mapTexcoords<span style="color:#000000">[</span>tcCounter <span style="color:#000000">+</span> <span style="color:#b07e00">5</span><span style="color:#000000">] = (</span>Vector2<span style="color:#000000">){</span> bottomTexUV<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomTexUV<span style="color:#000000">.</span>y <span style="color:#000000">};</span>
                tcCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">6</span><span style="color:#000000">;</span>
            <span style="color:#000000">}</span>
        <span style="color:#000000">}</span>
    <span style="color:#000000">}</span>
    <span style="color:#838183; font-style:italic">// Move data from mapVertices temp arrays to vertices float array</span>
    mesh<span style="color:#000000">.</span>vertexCount <span style="color:#000000">=</span> vCounter<span style="color:#000000">;</span>
    mesh<span style="color:#000000">.</span>triangleCount <span style="color:#000000">=</span> vCounter<span style="color:#000000">/</span><span style="color:#b07e00">3</span><span style="color:#000000">;</span>
    mesh<span style="color:#000000">.</span>vertices <span style="color:#000000">= (</span><span style="color:#0057ae">float</span> <span style="color:#000000">*)</span><span style="color:#010181">RL_MALLOC</span><span style="color:#000000">(</span>mesh<span style="color:#000000">.</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">));</span>
    mesh<span style="color:#000000">.</span>normals <span style="color:#000000">= (</span><span style="color:#0057ae">float</span> <span style="color:#000000">*)</span><span style="color:#010181">RL_MALLOC</span><span style="color:#000000">(</span>mesh<span style="color:#000000">.</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">));</span>
    mesh<span style="color:#000000">.</span>texcoords <span style="color:#000000">= (</span><span style="color:#0057ae">float</span> <span style="color:#000000">*)</span><span style="color:#010181">RL_MALLOC</span><span style="color:#000000">(</span>mesh<span style="color:#000000">.</span>vertexCount<span style="color:#000000">*</span><span style="color:#b07e00">2</span><span style="color:#000000">*</span><span style="color:#000000; font-weight:bold">sizeof</span><span style="color:#000000">(</span><span style="color:#0057ae">float</span><span style="color:#000000">));</span>
    mesh<span style="color:#000000">.</span>colors <span style="color:#000000">=</span> NULL<span style="color:#000000">;</span>
    <span style="color:#0057ae">int</span> fCounter <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    <span style="color:#838183; font-style:italic">// Move vertices data</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> vCounter<span style="color:#000000">;</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        mesh<span style="color:#000000">.</span>vertices<span style="color:#000000">[</span>fCounter<span style="color:#000000">] =</span> mapVertices<span style="color:#000000">[</span>i<span style="color:#000000">].</span>x<span style="color:#000000">;</span>
        mesh<span style="color:#000000">.</span>vertices<span style="color:#000000">[</span>fCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> mapVertices<span style="color:#000000">[</span>i<span style="color:#000000">].</span>y<span style="color:#000000">;</span>
        mesh<span style="color:#000000">.</span>vertices<span style="color:#000000">[</span>fCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> mapVertices<span style="color:#000000">[</span>i<span style="color:#000000">].</span>z<span style="color:#000000">;</span>
        fCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">3</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    fCounter <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    <span style="color:#838183; font-style:italic">// Move normals data</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> nCounter<span style="color:#000000">;</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        mesh<span style="color:#000000">.</span>normals<span style="color:#000000">[</span>fCounter<span style="color:#000000">] =</span> mapNormals<span style="color:#000000">[</span>i<span style="color:#000000">].</span>x<span style="color:#000000">;</span>
        mesh<span style="color:#000000">.</span>normals<span style="color:#000000">[</span>fCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> mapNormals<span style="color:#000000">[</span>i<span style="color:#000000">].</span>y<span style="color:#000000">;</span>
        mesh<span style="color:#000000">.</span>normals<span style="color:#000000">[</span>fCounter <span style="color:#000000">+</span> <span style="color:#b07e00">2</span><span style="color:#000000">] =</span> mapNormals<span style="color:#000000">[</span>i<span style="color:#000000">].</span>z<span style="color:#000000">;</span>
        fCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">3</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    fCounter <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
    <span style="color:#838183; font-style:italic">// Move texcoords data</span>
    <span style="color:#000000; font-weight:bold">for</span> <span style="color:#000000">(</span><span style="color:#0057ae">int</span> i <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span> i <span style="color:#000000">&lt;</span> tcCounter<span style="color:#000000">;</span> i<span style="color:#000000">++)</span>
    <span style="color:#000000">{</span>
        mesh<span style="color:#000000">.</span>texcoords<span style="color:#000000">[</span>fCounter<span style="color:#000000">] =</span> mapTexcoords<span style="color:#000000">[</span>i<span style="color:#000000">].</span>x<span style="color:#000000">;</span>
        mesh<span style="color:#000000">.</span>texcoords<span style="color:#000000">[</span>fCounter <span style="color:#000000">+</span> <span style="color:#b07e00">1</span><span style="color:#000000">] =</span> mapTexcoords<span style="color:#000000">[</span>i<span style="color:#000000">].</span>y<span style="color:#000000">;</span>
        fCounter <span style="color:#000000">+=</span> <span style="color:#b07e00">2</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    <span style="color:#010181">RL_FREE</span><span style="color:#000000">(</span>mapVertices<span style="color:#000000">);</span>
    <span style="color:#010181">RL_FREE</span><span style="color:#000000">(</span>mapNormals<span style="color:#000000">);</span>
    <span style="color:#010181">RL_FREE</span><span style="color:#000000">(</span>mapTexcoords<span style="color:#000000">);</span>
    <span style="color:#010181">UnloadImageColors</span><span style="color:#000000">(</span>pixels<span style="color:#000000">);</span>   <span style="color:#838183; font-style:italic">// Unload pixels color data</span>
    <span style="color:#838183; font-style:italic">// Upload vertex data to GPU (static mesh)</span>
    <span style="color:#010181">UploadMesh</span><span style="color:#000000">(&amp;</span>mesh<span style="color:#000000">,</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">return</span> mesh<span style="color:#000000">;</span>
<span style="color:#000000">}</span>
<span style="color:#008200">#endif</span>      <span style="color:#838183; font-style:italic">// SUPPORT_MESH_GENERATION</span><span style="color:#008200"></span>
