<span style="color:#0057ae">void</span> <span style="color:#010181">TakeScreenshot</span><span style="color:#000000">(</span><span style="color:#0057ae">const char</span> <span style="color:#000000">*</span>fileName<span style="color:#000000">){</span>
<span style="color:#008200">#if defined(SUPPORT_MODULE_RTEXTURES)</span>
    <span style="color:#838183; font-style:italic">// Security check to (partially) avoid malicious code on PLATFORM_WEB</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#010181">strchr</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&apos;</span><span style="color:#ff00ff">\&apos;</span><span style="color:#bf0303">&apos;</span><span style="color:#000000">) !=</span> NULL<span style="color:#000000">) {</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;SYSTEM: Provided fileName could be potentially malicious, avoid [</span><span style="color:#ff00ff">\&apos;</span><span style="color:#bf0303">] character&quot;</span><span style="color:#000000">);</span>  <span style="color:#000000; font-weight:bold">return</span><span style="color:#000000">; }</span>
    Vector2 scale <span style="color:#000000">=</span> <span style="color:#010181">GetWindowScaleDPI</span><span style="color:#000000">();</span>
    <span style="color:#0057ae">unsigned char</span> <span style="color:#000000">*</span>imgData <span style="color:#000000">=</span> <span style="color:#010181">rlReadScreenPixels</span><span style="color:#000000">((</span><span style="color:#0057ae">int</span><span style="color:#000000">)((</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>CORE<span style="color:#000000">.</span>Window<span style="color:#000000">.</span>render<span style="color:#000000">.</span>width<span style="color:#000000">*</span>scale<span style="color:#000000">.</span>x<span style="color:#000000">), (</span><span style="color:#0057ae">int</span><span style="color:#000000">)((</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>CORE<span style="color:#000000">.</span>Window<span style="color:#000000">.</span>render<span style="color:#000000">.</span>height<span style="color:#000000">*</span>scale<span style="color:#000000">.</span>y<span style="color:#000000">));</span>
    Image image <span style="color:#000000">= {</span> imgData<span style="color:#000000">, (</span><span style="color:#0057ae">int</span><span style="color:#000000">)((</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>CORE<span style="color:#000000">.</span>Window<span style="color:#000000">.</span>render<span style="color:#000000">.</span>width<span style="color:#000000">*</span>scale<span style="color:#000000">.</span>x<span style="color:#000000">), (</span><span style="color:#0057ae">int</span><span style="color:#000000">)((</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>CORE<span style="color:#000000">.</span>Window<span style="color:#000000">.</span>render<span style="color:#000000">.</span>height<span style="color:#000000">*</span>scale<span style="color:#000000">.</span>y<span style="color:#000000">),</span> <span style="color:#b07e00">1</span><span style="color:#000000">,</span> PIXELFORMAT_UNCOMPRESSED_R8G8B8A8 <span style="color:#000000">};</span>
    <span style="color:#0057ae">char</span> path<span style="color:#000000">[</span><span style="color:#b07e00">2048</span><span style="color:#000000">] = {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
    <span style="color:#010181">strcpy</span><span style="color:#000000">(</span>path<span style="color:#000000">,</span> <span style="color:#010181">TextFormat</span><span style="color:#000000">(</span><span style="color:#bf0303">&quot;%s/%s&quot;</span><span style="color:#000000">,</span> CORE<span style="color:#000000">.</span>Storage<span style="color:#000000">.</span>basePath<span style="color:#000000">,</span> fileName<span style="color:#000000">));</span>
    <span style="color:#010181">ExportImage</span><span style="color:#000000">(</span>image<span style="color:#000000">,</span> path<span style="color:#000000">);</span>           <span style="color:#838183; font-style:italic">// WARNING: Module required: rtextures</span>
    <span style="color:#010181">RL_FREE</span><span style="color:#000000">(</span>imgData<span style="color:#000000">);</span>
<span style="color:#008200">#if defined(PLATFORM_WEB)</span>
    <span style="color:#838183; font-style:italic">// Download file from MEMFS (emscripten memory filesystem)</span>
    <span style="color:#838183; font-style:italic">// saveFileFromMEMFSToDisk() function is defined in raylib/src/shell.html</span>
    <span style="color:#010181">emscripten_run_script</span><span style="color:#000000">(</span><span style="color:#010181">TextFormat</span><span style="color:#000000">(</span><span style="color:#bf0303">&quot;saveFileFromMEMFSToDisk(&apos;%s&apos;,&apos;%s&apos;)&quot;</span><span style="color:#000000">,</span> <span style="color:#010181">GetFileName</span><span style="color:#000000">(</span>path<span style="color:#000000">),</span> <span style="color:#010181">GetFileName</span><span style="color:#000000">(</span>path<span style="color:#000000">)));</span>
<span style="color:#008200">#endif</span>
    <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_INFO<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;SYSTEM: [%s] Screenshot taken successfully&quot;</span><span style="color:#000000">,</span> path<span style="color:#000000">);</span>
<span style="color:#008200">#else</span>
    <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span><span style="color:#bf0303">&quot;IMAGE: ExportImage() requires module: rtextures&quot;</span><span style="color:#000000">);</span>
<span style="color:#008200">#endif</span>
<span style="color:#000000">}</span>
