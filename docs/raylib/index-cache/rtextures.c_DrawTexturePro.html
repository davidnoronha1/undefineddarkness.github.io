<span style="color:#0057ae">void</span> <span style="color:#010181">DrawTexturePro</span><span style="color:#000000">(</span>Texture2D texture<span style="color:#000000">,</span> Rectangle source<span style="color:#000000">,</span> Rectangle dest<span style="color:#000000">,</span> Vector2 origin<span style="color:#000000">,</span> <span style="color:#0057ae">float</span> rotation<span style="color:#000000">,</span> Color tint<span style="color:#000000">){</span>
    <span style="color:#838183; font-style:italic">// Check if texture is valid</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>texture<span style="color:#000000">.</span>id <span style="color:#000000">&gt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#0057ae">float</span> width <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>texture<span style="color:#000000">.</span>width<span style="color:#000000">;</span>
        <span style="color:#0057ae">float</span> height <span style="color:#000000">= (</span><span style="color:#0057ae">float</span><span style="color:#000000">)</span>texture<span style="color:#000000">.</span>height<span style="color:#000000">;</span>
        <span style="color:#0057ae">bool</span> flipX <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>source<span style="color:#000000">.</span>width <span style="color:#000000">&lt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">) {</span> flipX <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">true</span><span style="color:#000000">;</span> source<span style="color:#000000">.</span>width <span style="color:#000000">*= -</span><span style="color:#b07e00">1</span><span style="color:#000000">; }</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>source<span style="color:#000000">.</span>height <span style="color:#000000">&lt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span> source<span style="color:#000000">.</span>y <span style="color:#000000">-=</span> source<span style="color:#000000">.</span>height<span style="color:#000000">;</span>
        Vector2 topLeft <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
        Vector2 topRight <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
        Vector2 bottomLeft <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
        Vector2 bottomRight <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
        <span style="color:#838183; font-style:italic">// Only calculate rotation if needed</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>rotation <span style="color:#000000">==</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            <span style="color:#0057ae">float</span> x <span style="color:#000000">=</span> dest<span style="color:#000000">.</span>x <span style="color:#000000">-</span> origin<span style="color:#000000">.</span>x<span style="color:#000000">;</span>
            <span style="color:#0057ae">float</span> y <span style="color:#000000">=</span> dest<span style="color:#000000">.</span>y <span style="color:#000000">-</span> origin<span style="color:#000000">.</span>y<span style="color:#000000">;</span>
            topLeft <span style="color:#000000">= (</span>Vector2<span style="color:#000000">){</span> x<span style="color:#000000">,</span> y <span style="color:#000000">};</span>
            topRight <span style="color:#000000">= (</span>Vector2<span style="color:#000000">){</span> x <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>width<span style="color:#000000">,</span> y <span style="color:#000000">};</span>
            bottomLeft <span style="color:#000000">= (</span>Vector2<span style="color:#000000">){</span> x<span style="color:#000000">,</span> y <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
            bottomRight <span style="color:#000000">= (</span>Vector2<span style="color:#000000">){</span> x <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>width<span style="color:#000000">,</span> y <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>height <span style="color:#000000">};</span>
        <span style="color:#000000">}</span>
        <span style="color:#000000; font-weight:bold">else</span>
        <span style="color:#000000">{</span>
            <span style="color:#0057ae">float</span> sinRotation <span style="color:#000000">=</span> <span style="color:#010181">sinf</span><span style="color:#000000">(</span>rotation<span style="color:#000000">*</span>DEG2RAD<span style="color:#000000">);</span>
            <span style="color:#0057ae">float</span> cosRotation <span style="color:#000000">=</span> <span style="color:#010181">cosf</span><span style="color:#000000">(</span>rotation<span style="color:#000000">*</span>DEG2RAD<span style="color:#000000">);</span>
            <span style="color:#0057ae">float</span> x <span style="color:#000000">=</span> dest<span style="color:#000000">.</span>x<span style="color:#000000">;</span>
            <span style="color:#0057ae">float</span> y <span style="color:#000000">=</span> dest<span style="color:#000000">.</span>y<span style="color:#000000">;</span>
            <span style="color:#0057ae">float</span> dx <span style="color:#000000">= -</span>origin<span style="color:#000000">.</span>x<span style="color:#000000">;</span>
            <span style="color:#0057ae">float</span> dy <span style="color:#000000">= -</span>origin<span style="color:#000000">.</span>y<span style="color:#000000">;</span>
            topLeft<span style="color:#000000">.</span>x <span style="color:#000000">=</span> x <span style="color:#000000">+</span> dx<span style="color:#000000">*</span>cosRotation <span style="color:#000000">-</span> dy<span style="color:#000000">*</span>sinRotation<span style="color:#000000">;</span>
            topLeft<span style="color:#000000">.</span>y <span style="color:#000000">=</span> y <span style="color:#000000">+</span> dx<span style="color:#000000">*</span>sinRotation <span style="color:#000000">+</span> dy<span style="color:#000000">*</span>cosRotation<span style="color:#000000">;</span>
            topRight<span style="color:#000000">.</span>x <span style="color:#000000">=</span> x <span style="color:#000000">+ (</span>dx <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>width<span style="color:#000000">)*</span>cosRotation <span style="color:#000000">-</span> dy<span style="color:#000000">*</span>sinRotation<span style="color:#000000">;</span>
            topRight<span style="color:#000000">.</span>y <span style="color:#000000">=</span> y <span style="color:#000000">+ (</span>dx <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>width<span style="color:#000000">)*</span>sinRotation <span style="color:#000000">+</span> dy<span style="color:#000000">*</span>cosRotation<span style="color:#000000">;</span>
            bottomLeft<span style="color:#000000">.</span>x <span style="color:#000000">=</span> x <span style="color:#000000">+</span> dx<span style="color:#000000">*</span>cosRotation <span style="color:#000000">- (</span>dy <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>height<span style="color:#000000">)*</span>sinRotation<span style="color:#000000">;</span>
            bottomLeft<span style="color:#000000">.</span>y <span style="color:#000000">=</span> y <span style="color:#000000">+</span> dx<span style="color:#000000">*</span>sinRotation <span style="color:#000000">+ (</span>dy <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>height<span style="color:#000000">)*</span>cosRotation<span style="color:#000000">;</span>
            bottomRight<span style="color:#000000">.</span>x <span style="color:#000000">=</span> x <span style="color:#000000">+ (</span>dx <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>width<span style="color:#000000">)*</span>cosRotation <span style="color:#000000">- (</span>dy <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>height<span style="color:#000000">)*</span>sinRotation<span style="color:#000000">;</span>
            bottomRight<span style="color:#000000">.</span>y <span style="color:#000000">=</span> y <span style="color:#000000">+ (</span>dx <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>width<span style="color:#000000">)*</span>sinRotation <span style="color:#000000">+ (</span>dy <span style="color:#000000">+</span> dest<span style="color:#000000">.</span>height<span style="color:#000000">)*</span>cosRotation<span style="color:#000000">;</span>
        <span style="color:#000000">}</span>
        <span style="color:#010181">rlSetTexture</span><span style="color:#000000">(</span>texture<span style="color:#000000">.</span>id<span style="color:#000000">);</span>
        <span style="color:#010181">rlBegin</span><span style="color:#000000">(</span>RL_QUADS<span style="color:#000000">);</span>
            <span style="color:#010181">rlColor4ub</span><span style="color:#000000">(</span>tint<span style="color:#000000">.</span>r<span style="color:#000000">,</span> tint<span style="color:#000000">.</span>g<span style="color:#000000">,</span> tint<span style="color:#000000">.</span>b<span style="color:#000000">,</span> tint<span style="color:#000000">.</span>a<span style="color:#000000">);</span>
            <span style="color:#010181">rlNormal3f</span><span style="color:#000000">(</span><span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">0.0</span>f<span style="color:#000000">,</span> <span style="color:#b07e00">1.0</span>f<span style="color:#000000">);</span>                          <span style="color:#838183; font-style:italic">// Normal vector pointing towards viewer</span>
            <span style="color:#838183; font-style:italic">// Top-left corner for texture and quad</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>flipX<span style="color:#000000">)</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">((</span>source<span style="color:#000000">.</span>x <span style="color:#000000">+</span> source<span style="color:#000000">.</span>width<span style="color:#000000">)/</span>width<span style="color:#000000">,</span> source<span style="color:#000000">.</span>y<span style="color:#000000">/</span>height<span style="color:#000000">);</span>
            <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">(</span>source<span style="color:#000000">.</span>x<span style="color:#000000">/</span>width<span style="color:#000000">,</span> source<span style="color:#000000">.</span>y<span style="color:#000000">/</span>height<span style="color:#000000">);</span>
            <span style="color:#010181">rlVertex2f</span><span style="color:#000000">(</span>topLeft<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topLeft<span style="color:#000000">.</span>y<span style="color:#000000">);</span>
            <span style="color:#838183; font-style:italic">// Bottom-left corner for texture and quad</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>flipX<span style="color:#000000">)</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">((</span>source<span style="color:#000000">.</span>x <span style="color:#000000">+</span> source<span style="color:#000000">.</span>width<span style="color:#000000">)/</span>width<span style="color:#000000">, (</span>source<span style="color:#000000">.</span>y <span style="color:#000000">+</span> source<span style="color:#000000">.</span>height<span style="color:#000000">)/</span>height<span style="color:#000000">);</span>
            <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">(</span>source<span style="color:#000000">.</span>x<span style="color:#000000">/</span>width<span style="color:#000000">, (</span>source<span style="color:#000000">.</span>y <span style="color:#000000">+</span> source<span style="color:#000000">.</span>height<span style="color:#000000">)/</span>height<span style="color:#000000">);</span>
            <span style="color:#010181">rlVertex2f</span><span style="color:#000000">(</span>bottomLeft<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomLeft<span style="color:#000000">.</span>y<span style="color:#000000">);</span>
            <span style="color:#838183; font-style:italic">// Bottom-right corner for texture and quad</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>flipX<span style="color:#000000">)</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">(</span>source<span style="color:#000000">.</span>x<span style="color:#000000">/</span>width<span style="color:#000000">, (</span>source<span style="color:#000000">.</span>y <span style="color:#000000">+</span> source<span style="color:#000000">.</span>height<span style="color:#000000">)/</span>height<span style="color:#000000">);</span>
            <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">((</span>source<span style="color:#000000">.</span>x <span style="color:#000000">+</span> source<span style="color:#000000">.</span>width<span style="color:#000000">)/</span>width<span style="color:#000000">, (</span>source<span style="color:#000000">.</span>y <span style="color:#000000">+</span> source<span style="color:#000000">.</span>height<span style="color:#000000">)/</span>height<span style="color:#000000">);</span>
            <span style="color:#010181">rlVertex2f</span><span style="color:#000000">(</span>bottomRight<span style="color:#000000">.</span>x<span style="color:#000000">,</span> bottomRight<span style="color:#000000">.</span>y<span style="color:#000000">);</span>
            <span style="color:#838183; font-style:italic">// Top-right corner for texture and quad</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>flipX<span style="color:#000000">)</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">(</span>source<span style="color:#000000">.</span>x<span style="color:#000000">/</span>width<span style="color:#000000">,</span> source<span style="color:#000000">.</span>y<span style="color:#000000">/</span>height<span style="color:#000000">);</span>
            <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">rlTexCoord2f</span><span style="color:#000000">((</span>source<span style="color:#000000">.</span>x <span style="color:#000000">+</span> source<span style="color:#000000">.</span>width<span style="color:#000000">)/</span>width<span style="color:#000000">,</span> source<span style="color:#000000">.</span>y<span style="color:#000000">/</span>height<span style="color:#000000">);</span>
            <span style="color:#010181">rlVertex2f</span><span style="color:#000000">(</span>topRight<span style="color:#000000">.</span>x<span style="color:#000000">,</span> topRight<span style="color:#000000">.</span>y<span style="color:#000000">);</span>
        <span style="color:#010181">rlEnd</span><span style="color:#000000">();</span>
        <span style="color:#010181">rlSetTexture</span><span style="color:#000000">(</span><span style="color:#b07e00">0</span><span style="color:#000000">);</span>
        <span style="color:#838183; font-style:italic">// NOTE: Vertex position can be transformed using matrices</span>
        <span style="color:#838183; font-style:italic">// but the process is way more costly than just calculating</span>
        <span style="color:#838183; font-style:italic">// the vertex positions manually, like done above.</span>
        <span style="color:#838183; font-style:italic">// I leave here the old implementation for educational purposes,</span>
        <span style="color:#838183; font-style:italic">// just in case someone wants to do some performance test</span>
        <span style="color:#838183; font-style:italic">/*</span>
<span style="color:#838183; font-style:italic">        rlSetTexture(texture.id);</span>
<span style="color:#838183; font-style:italic">        rlPushMatrix();</span>
<span style="color:#838183; font-style:italic">            rlTranslatef(dest.x, dest.y, 0.0f);</span>
<span style="color:#838183; font-style:italic">            if (rotation != 0.0f) rlRotatef(rotation, 0.0f, 0.0f, 1.0f);</span>
<span style="color:#838183; font-style:italic">            rlTranslatef(-origin.x, -origin.y, 0.0f);</span>
<span style="color:#838183; font-style:italic">            rlBegin(RL_QUADS);</span>
<span style="color:#838183; font-style:italic">                rlColor4ub(tint.r, tint.g, tint.b, tint.a);</span>
<span style="color:#838183; font-style:italic">                rlNormal3f(0.0f, 0.0f, 1.0f);                          // Normal vector pointing towards viewer</span>
<span style="color:#838183; font-style:italic">                // Bottom-left corner for texture and quad</span>
<span style="color:#838183; font-style:italic">                if (flipX) rlTexCoord2f((source.x + source.width)/width, source.y/height);</span>
<span style="color:#838183; font-style:italic">                else rlTexCoord2f(source.x/width, source.y/height);</span>
<span style="color:#838183; font-style:italic">                rlVertex2f(0.0f, 0.0f);</span>
<span style="color:#838183; font-style:italic">                // Bottom-right corner for texture and quad</span>
<span style="color:#838183; font-style:italic">                if (flipX) rlTexCoord2f((source.x + source.width)/width, (source.y + source.height)/height);</span>
<span style="color:#838183; font-style:italic">                else rlTexCoord2f(source.x/width, (source.y + source.height)/height);</span>
<span style="color:#838183; font-style:italic">                rlVertex2f(0.0f, dest.height);</span>
<span style="color:#838183; font-style:italic">                // Top-right corner for texture and quad</span>
<span style="color:#838183; font-style:italic">                if (flipX) rlTexCoord2f(source.x/width, (source.y + source.height)/height);</span>
<span style="color:#838183; font-style:italic">                else rlTexCoord2f((source.x + source.width)/width, (source.y + source.height)/height);</span>
<span style="color:#838183; font-style:italic">                rlVertex2f(dest.width, dest.height);</span>
<span style="color:#838183; font-style:italic">                // Top-left corner for texture and quad</span>
<span style="color:#838183; font-style:italic">                if (flipX) rlTexCoord2f(source.x/width, source.y/height);</span>
<span style="color:#838183; font-style:italic">                else rlTexCoord2f((source.x + source.width)/width, source.y/height);</span>
<span style="color:#838183; font-style:italic">                rlVertex2f(dest.width, 0.0f);</span>
<span style="color:#838183; font-style:italic">            rlEnd();</span>
<span style="color:#838183; font-style:italic">        rlPopMatrix();</span>
<span style="color:#838183; font-style:italic">        rlSetTexture(0);</span>
<span style="color:#838183; font-style:italic">        */</span>
    <span style="color:#000000">}</span>
<span style="color:#000000">}</span>
