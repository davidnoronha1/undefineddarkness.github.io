<span style="color:#0057ae">int</span> <span style="color:#010181">GetPixelDataSize</span><span style="color:#000000">(</span><span style="color:#0057ae">int</span> width<span style="color:#000000">,</span> <span style="color:#0057ae">int</span> height<span style="color:#000000">,</span> <span style="color:#0057ae">int</span> format<span style="color:#000000">){</span>
    <span style="color:#0057ae">int</span> dataSize <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>       <span style="color:#838183; font-style:italic">// Size in bytes</span>
    <span style="color:#0057ae">int</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>            <span style="color:#838183; font-style:italic">// Bits per pixel</span>
    <span style="color:#000000; font-weight:bold">switch</span> <span style="color:#000000">(</span>format<span style="color:#000000">)</span>
    <span style="color:#000000">{</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_GRAYSCALE<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">8</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_GRAY_ALPHA<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R5G6B5<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R5G5B5A1<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R4G4B4A4<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">16</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R8G8B8A8<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">32</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R8G8B8<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">24</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R32<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">32</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R32G32B32<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">32</span><span style="color:#000000">*</span><span style="color:#b07e00">3</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_UNCOMPRESSED_R32G32B32A32<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">32</span><span style="color:#000000">*</span><span style="color:#b07e00">4</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_DXT1_RGB<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_DXT1_RGBA<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_ETC1_RGB<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_ETC2_RGB<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_PVRT_RGB<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_PVRT_RGBA<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">4</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_DXT3_RGBA<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_DXT5_RGBA<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_ETC2_EAC_RGBA<span style="color:#000000">:</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_ASTC_4x4_RGBA<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">8</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">case</span> PIXELFORMAT_COMPRESSED_ASTC_8x8_RGBA<span style="color:#000000">:</span> bpp <span style="color:#000000">=</span> <span style="color:#b07e00">2</span><span style="color:#000000">;</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">default</span><span style="color:#000000">:</span> <span style="color:#000000; font-weight:bold">break</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    dataSize <span style="color:#000000">=</span> width<span style="color:#000000">*</span>height<span style="color:#000000">*</span>bpp<span style="color:#000000">/</span><span style="color:#b07e00">8</span><span style="color:#000000">;</span>  <span style="color:#838183; font-style:italic">// Total data size in bytes</span>
    <span style="color:#838183; font-style:italic">// Most compressed formats works on 4x4 blocks,</span>
    <span style="color:#838183; font-style:italic">// if texture is smaller, minimum dataSize is 8 or 16</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">((</span>width <span style="color:#000000">&lt;</span> <span style="color:#b07e00">4</span><span style="color:#000000">) &amp;&amp; (</span>height <span style="color:#000000">&lt;</span> <span style="color:#b07e00">4</span><span style="color:#000000">))</span>
    <span style="color:#000000">{</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">((</span>format <span style="color:#000000">&gt;=</span> PIXELFORMAT_COMPRESSED_DXT1_RGB<span style="color:#000000">) &amp;&amp; (</span>format <span style="color:#000000">&lt;</span> PIXELFORMAT_COMPRESSED_DXT3_RGBA<span style="color:#000000">))</span> dataSize <span style="color:#000000">=</span> <span style="color:#b07e00">8</span><span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">((</span>format <span style="color:#000000">&gt;=</span> PIXELFORMAT_COMPRESSED_DXT3_RGBA<span style="color:#000000">) &amp;&amp; (</span>format <span style="color:#000000">&lt;</span> PIXELFORMAT_COMPRESSED_ASTC_8x8_RGBA<span style="color:#000000">))</span> dataSize <span style="color:#000000">=</span> <span style="color:#b07e00">16</span><span style="color:#000000">;</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">return</span> dataSize<span style="color:#000000">;</span>
<span style="color:#000000">}</span>
