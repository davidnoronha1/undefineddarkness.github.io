<span style="color:#0057ae">bool</span> <span style="color:#010181">ExportWave</span><span style="color:#000000">(</span>Wave wave<span style="color:#000000">,</span> <span style="color:#0057ae">const char</span> <span style="color:#000000">*</span>fileName<span style="color:#000000">){</span>
    <span style="color:#0057ae">bool</span> success <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">;</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span><span style="color:#000000; font-weight:bold">false</span><span style="color:#000000">) { }</span>
<span style="color:#008200">#if defined(SUPPORT_FILEFORMAT_WAV)</span>
    <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.wav&quot;</span><span style="color:#000000">))</span>
    <span style="color:#000000">{</span>
        drwav wav <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
        drwav_data_format format <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
        format<span style="color:#000000">.</span>container <span style="color:#000000">=</span> drwav_container_riff<span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>wave<span style="color:#000000">.</span>sampleSize <span style="color:#000000">==</span> <span style="color:#b07e00">32</span><span style="color:#000000">)</span> format<span style="color:#000000">.</span>format <span style="color:#000000">=</span> DR_WAVE_FORMAT_IEEE_FLOAT<span style="color:#000000">;</span>
        <span style="color:#000000; font-weight:bold">else</span> format<span style="color:#000000">.</span>format <span style="color:#000000">=</span> DR_WAVE_FORMAT_PCM<span style="color:#000000">;</span>
        format<span style="color:#000000">.</span>channels <span style="color:#000000">=</span> wave<span style="color:#000000">.</span>channels<span style="color:#000000">;</span>
        format<span style="color:#000000">.</span>sampleRate <span style="color:#000000">=</span> wave<span style="color:#000000">.</span>sampleRate<span style="color:#000000">;</span>
        format<span style="color:#000000">.</span>bitsPerSample <span style="color:#000000">=</span> wave<span style="color:#000000">.</span>sampleSize<span style="color:#000000">;</span>
        <span style="color:#0057ae">void</span> <span style="color:#000000">*</span>fileData <span style="color:#000000">=</span> NULL<span style="color:#000000">;</span>
        <span style="color:#0057ae">size_t</span> fileDataSize <span style="color:#000000">=</span> <span style="color:#b07e00">0</span><span style="color:#000000">;</span>
        success <span style="color:#000000">=</span> <span style="color:#010181">drwav_init_memory_write</span><span style="color:#000000">(&amp;</span>wav<span style="color:#000000">, &amp;</span>fileData<span style="color:#000000">, &amp;</span>fileDataSize<span style="color:#000000">, &amp;</span>format<span style="color:#000000">,</span> NULL<span style="color:#000000">);</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>success<span style="color:#000000">)</span> success <span style="color:#000000">= (</span><span style="color:#0057ae">int</span><span style="color:#000000">)</span><span style="color:#010181">drwav_write_pcm_frames</span><span style="color:#000000">(&amp;</span>wav<span style="color:#000000">,</span> wave<span style="color:#000000">.</span>frameCount<span style="color:#000000">,</span> wave<span style="color:#000000">.</span>data<span style="color:#000000">);</span>
        drwav_result result <span style="color:#000000">=</span> <span style="color:#010181">drwav_uninit</span><span style="color:#000000">(&amp;</span>wav<span style="color:#000000">);</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>result <span style="color:#000000">==</span> DRWAV_SUCCESS<span style="color:#000000">)</span> success <span style="color:#000000">=</span> <span style="color:#010181">SaveFileData</span><span style="color:#000000">(</span>fileName<span style="color:#000000">, (</span><span style="color:#0057ae">unsigned char</span> <span style="color:#000000">*)</span>fileData<span style="color:#000000">, (</span><span style="color:#0057ae">unsigned int</span><span style="color:#000000">)</span>fileDataSize<span style="color:#000000">);</span>
        <span style="color:#010181">drwav_free</span><span style="color:#000000">(</span>fileData<span style="color:#000000">,</span> NULL<span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
<span style="color:#008200">#endif</span>
<span style="color:#008200">#if defined(SUPPORT_FILEFORMAT_QOA)</span>
    <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.qoa&quot;</span><span style="color:#000000">))</span>
    <span style="color:#000000">{</span>
        <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>wave<span style="color:#000000">.</span>sampleSize <span style="color:#000000">==</span> <span style="color:#b07e00">16</span><span style="color:#000000">)</span>
        <span style="color:#000000">{</span>
            qoa_desc qoa <span style="color:#000000">= {</span> <span style="color:#b07e00">0</span> <span style="color:#000000">};</span>
            qoa<span style="color:#000000">.</span>channels <span style="color:#000000">=</span> wave<span style="color:#000000">.</span>channels<span style="color:#000000">;</span>
            qoa<span style="color:#000000">.</span>samplerate <span style="color:#000000">=</span> wave<span style="color:#000000">.</span>sampleRate<span style="color:#000000">;</span>
            qoa<span style="color:#000000">.</span>samples <span style="color:#000000">=</span> wave<span style="color:#000000">.</span>frameCount<span style="color:#000000">;</span>
            <span style="color:#0057ae">int</span> bytesWritten <span style="color:#000000">=</span> <span style="color:#010181">qoa_write</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> wave<span style="color:#000000">.</span>data<span style="color:#000000">, &amp;</span>qoa<span style="color:#000000">);</span>
            <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>bytesWritten <span style="color:#000000">&gt;</span> <span style="color:#b07e00">0</span><span style="color:#000000">)</span> success <span style="color:#000000">=</span> <span style="color:#000000; font-weight:bold">true</span><span style="color:#000000">;</span>
        <span style="color:#000000">}</span>
        <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;AUDIO: Wave data must be 16 bit per sample for QOA format export&quot;</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
<span style="color:#008200">#endif</span>
    <span style="color:#000000; font-weight:bold">else if</span> <span style="color:#000000">(</span><span style="color:#010181">IsFileExtension</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;.raw&quot;</span><span style="color:#000000">))</span>
    <span style="color:#000000">{</span>
        <span style="color:#838183; font-style:italic">// Export raw sample data (without header)</span>
        <span style="color:#838183; font-style:italic">// NOTE: It&apos;s up to the user to track wave parameters</span>
        success <span style="color:#000000">=</span> <span style="color:#010181">SaveFileData</span><span style="color:#000000">(</span>fileName<span style="color:#000000">,</span> wave<span style="color:#000000">.</span>data<span style="color:#000000">,</span> wave<span style="color:#000000">.</span>frameCount<span style="color:#000000">*</span>wave<span style="color:#000000">.</span>channels<span style="color:#000000">*</span>wave<span style="color:#000000">.</span>sampleSize<span style="color:#000000">/</span><span style="color:#b07e00">8</span><span style="color:#000000">);</span>
    <span style="color:#000000">}</span>
    <span style="color:#000000; font-weight:bold">if</span> <span style="color:#000000">(</span>success<span style="color:#000000">)</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_INFO<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;FILEIO: [%s] Wave data exported successfully&quot;</span><span style="color:#000000">,</span> fileName<span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">else</span> <span style="color:#010181">TRACELOG</span><span style="color:#000000">(</span>LOG_WARNING<span style="color:#000000">,</span> <span style="color:#bf0303">&quot;FILEIO: [%s] Failed to export wave data&quot;</span><span style="color:#000000">,</span> fileName<span style="color:#000000">);</span>
    <span style="color:#000000; font-weight:bold">return</span> success<span style="color:#000000">;</span>
<span style="color:#000000">}</span>
